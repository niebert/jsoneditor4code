function cloneJSON(pJSON){var vJSON={};return pJSON?vJSON=JSON.parse(JSON.stringify(pJSON)):console.log("ERROR: cloneJSON(pJSON) - pJSON undefined!"),vJSON}function extendHash(a,b){for(var i in b)a[i]=b[i]}function isHash(pObject){return pObject&&"object"==typeof pObject}function isArray(pObj){return isHash(pObj)&&pObj instanceof Array}function makeMap(str){for(var obj={},items=str.split(","),i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function lengthHash(pHash){var vLength=0;if(isHash(pHash))for(var key in pHash)pHash.hasOwnProperty(key)&&vLength++;return vLength}function getDeleteBoolean4Hash(pHash){for(var vDelHash={},vArrID_OLD=getArray4HashID(pHash),i=0;i<vArrID_OLD.length;i++)vDelHash[vArrID_OLD[i]]=!0;return vDelHash}function updateHash4NewIDs(pHash,pArrID_NEW,pDefaultValue){for(var vDelHash=getDeleteBoolean4Hash(pHash),vDefaultValue=pDefaultValue||"",vArrID_OLD=getArray4HashID(pHash),vID="",i=0;i<pArrID_NEW.length;i++)vID=pArrID_NEW[i],pHash.hasOwnProperty(vID)?vDelHash[vID]=!1:pHash[vID]=""!=vDefaultValue?vDefaultValue+" '"+vID+"'":"";for(var i=0;i<vArrID_OLD.length;i++)vID=vArrID_OLD[i],1==vDelHash[vID]&&delete pHash[vID]}function updateHashSourceDestination(pSource,pDest){}function renameHashKey(pHash,old_key,new_key){var vErrorMSG="";return isHash(pHash)&&(pHash.hasOwnProperty(new_key)?vErrorMSG="ERROR: Rename Hash Key - New Key already exists":(pHash[new_key]=pHash[old_key],delete pHash[old_key],console.log("Rename hash form '"+old_key+"' to '"+new_key+"'"))),vErrorMSG}function firstKey4Hash(pHash){var vLength=0,vKey="";if(isHash(pHash))for(var key in pHash)if(pHash.hasOwnProperty(key)&&1==++vLength){vKey=key;break}return vKey}function createHash4Array(pArr,pHash){var vHash=pHash||{};if(isArray(pArr))for(var i=0;i<pArr.length;i++)vHash[pArr[i]]=pArr[i];return vHash}function createArray4HashID(pHash){var vArr=[];for(var iID in pHash)pHash.hasOwnProperty(iID)&&vArr.push(iID);return vArr}function isValidJSON(str){try{JSON.parse(str)}catch(e){return!1}return!0}function existsPathJSON(pJSON,pPath){return definedPathJSON(pJSON,pPath)==pPath}function getLastID4PathJSON(pJSON,pPath){var vPathArr=pPath.split("."),vID=vPathArr.pop()||"";return""!=vID&&vID==vID.replace(/[^0-9]/g,"")&&(vID=parseInt(vID)),console.log("getLastID4PathJSON(pJSON,'"+pPath+"')='"+vID+"' Type='"+typeof vID+"'"),vID}function set4PathJSON(pJSON,pPath,pValue){getObject4PathJSON(pJSON,pPath)[getLastID4PathJSON(pJSON,pPath)]=pValue}function get4PathJSON(pJSON,pPath){return getObject4PathJSON(pJSON,pPath)[getLastID4PathJSON(pJSON,pPath)]}function getJSON4Path(pPath){var vPathArr=pPath.split("."),vJSON;if(eval("vJSON="+vPathArr[0]),vJSON)return vPathArr.shift(),pPath=vPathArr.join("."),getObject4PathJSON(pJSON,pPath);alert("getJSON4Path('"+pPath+"') root element of path undefined")}function getObject4PathJSON(pJSON,pPath){for(var vPathArr=pPath.split("."),vID="",x=pJSON,i=0;i<vPathArr.length-1;i++)vID=vPathArr[i].replace(/[^0-9]/g,""),vID=vID==vPathArr[i]?parseInt(vPathArr[i]):vPathArr[i],x=x[ID];return x}function definedPathJSON(pJSON,pPath){for(var vPathArr=pPath.split("."),vExists=!0,x=pJSON,vSep="",vID="",vUndefPath="",vDefinedPath="",k=0,i=0;i<vPathArr.length;i++)vExists?(vID=vPathArr[i].replace(/[^0-9]/g,""),""!=vID&&vID==vPathArr[i]?(k=parseInt(vPathArr[i]),isArray(x)&&k<x.length?k>=0?(vDefinedPath+=vSep+vPathArr[i],vSep="."):(vExists=!1,vUndefPath+=vPathArr[i]):isHash(x)&&x.hasOwnProperty(vPathArr[i])?(vDefinedPath+=vSep+vPathArr[i],vSep="."):(vExists=!1,vUndefPath+=vPathArr[i])):isHash(x)&&x.hasOwnProperty(vPathArr[i])?(vDefinedPath+=vSep+vPathArr[i],vSep="."):(vExists=!1,vUndefPath+=vPathArr[i])):(vUndefPath+=vSep+vPathArr[i],vSep=".");return vDefinedPath}function saveFile2HDD(pFilename,pContent){var file=new File([pContent],{type:"text/plain;charset=utf-8"});saveAs(file,pFilename)}function saver4JSON(pFile){var vFile=pFile||vFileBase+".json";exporter4JSON(),alert("File: '"+vFile+"' saved!")}function exporter4JSON(pFile){var vFile=pFile||vFileBase+".json",vJSON=editor.getValue(),vContent=JSON.stringify(vJSON,null,4);saveFile2HDD(vFile,vContent),console.log("JSON output '"+vFile+"':\n"+vContent)}function exportJavascript(){alert("Export Javascript");var source=vDataJSON.template;Handlebars.compile(source)}function loader4JSON(pFileID4DOM){var fileToLoad=document.getElementById(pFileID4DOM).files[0];if(fileToLoad){console.log("loader4JSON() - File '"+fileToLoad.name+"' exists."),$("#load_filename").html(fileToLoad.name);var fileReader=new FileReader;fileReader.onload=function(fileLoadedEvent){var vTextFromFileLoaded=fileLoadedEvent.target.result;try{editor.setValue(JSON.parse(vTextFromFileLoaded)),alert("File JSON '"+fileToLoad.name+"' loaded successfully!")}catch(e){editor.setValue([]),alert(e)}},fileReader.readAsText(fileToLoad,"UTF-8")}else alert("File is missing");saveLS(fileToLoad.name)}function LinkParam(){this.size=0,this.aVars={},this.aLink=""}function loadJS(pName){var vName=pName||"class.json";if("undefined"!=typeof Storage){if(void 0!==typeof localStorage.getItem(vFileBase)){console.log("JSON Data '"+vName+"' try loading from Local Storage");var vJSONstring=localStorage.getItem(vFileBase);if(vJSONstring){console.log("parse DB '"+vName+"') from LocalStorage JSONstring='"+vJSONstring.substr(0,120)+"...'");try{this.setEditorData(JSON.parse(vJSONstring))}catch(e){alert(e)}}else console.log("JSON-DB '"+vName+"' undefined in Local Storage.\nSave default as JSON"),localStorage.setItem(vFileBase,JSON.stringify(editor.getValue()))}else console.log("JSON-Data '"+vName+"' is undefined in Local Storage.\nSave default as JSON"),localStorage.setItem(vFileBase,JSON.stringify(editor.getValue()));if(void 0!==typeof localStorage.getItem("filename")){var vFile=localStorage.getItem("filename");$("#load_filename").html(vFile)}}else console.log("WARNING: Sorry, your browser does not support Local Storage of JSON Database. Use Firefox ...")}function saveLS(pName){var vData=editor.getValue(),vName=pName||"class.json";if("undefined"!=typeof Storage)if(void 0!=typeof vData)if(console.log("JSON-DB '"+vName+"' is defined, JSONDB in  Local Storage"),vData){var vJSONstring=JSON.stringify(vData);console.log("saveLS('"+vName+"') JSONstring='"+vJSONstring.substr(0,120)+"...'"),localStorage.setItem(vFileBase,vJSONstring),localStorage.setItem("filename",vName)}else console.log("vData with JSON is NOT defined");else console.log("JSON Data is undefined");else console.log("WARNING: Sorry, your browser does not support Local Storage of JSON Database. Use Firefox ...")}if(function(view){"use strict";if(view.URL=view.URL||view.webkitURL,view.Blob&&view.URL)try{return void new Blob}catch(e){}var BlobBuilder=view.BlobBuilder||view.WebKitBlobBuilder||view.MozBlobBuilder||function(view){var get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]},FakeBlobBuilder=function(){this.data=[]},FakeBlob=function(data,type,encoding){this.data=data,this.size=data.length,this.type=type,this.encoding=encoding},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type]},file_ex_codes="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(FakeBlob.fake=FB_proto.fake=!0;file_ex_code--;)FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1;return real_URL.createObjectURL||(URL=view.URL=function(uri){var uri_origin,uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a");return uri_info.href=uri,"origin"in uri_info||("data:"===uri_info.protocol.toLowerCase()?uri_info.origin=null:(uri_origin=uri.match(origin),uri_info.origin=uri_origin&&uri_origin[1])),uri_info}),URL.createObjectURL=function(blob){var data_URI_header,type=blob.type;return null===type&&(type="application/octet-stream"),blob instanceof FakeBlob?(data_URI_header="data:"+type,"base64"===blob.encoding?data_URI_header+";base64,"+blob.data:"URI"===blob.encoding?data_URI_header+","+decodeURIComponent(blob.data):btoa?data_URI_header+";base64,"+btoa(blob.data):data_URI_header+","+encodeURIComponent(blob.data)):real_create_object_URL?real_create_object_URL.call(real_URL,blob):void 0},URL.revokeObjectURL=function(object_URL){"data:"!==object_URL.substring(0,5)&&real_revoke_object_URL&&real_revoke_object_URL.call(real_URL,object_URL)},FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){for(var str="",buf=new Uint8Array(data),i=0,buf_len=buf.length;i<buf_len;i++)str+=String.fromCharCode(buf[i]);bb.push(str)}else if("Blob"===get_class(data)||"File"===get_class(data)){if(!FileReaderSync)throw new FileException("NOT_READABLE_ERR");var fr=new FileReaderSync;bb.push(fr.readAsBinaryString(data))}else data instanceof FakeBlob?"base64"===data.encoding&&atob?bb.push(atob(data.data)):"URI"===data.encoding?bb.push(decodeURIComponent(data.data)):"raw"===data.encoding&&bb.push(data.data):("string"!=typeof data&&(data+=""),bb.push(unescape(encodeURIComponent(data))))},FBB_proto.getBlob=function(type){return arguments.length||(type=null),new FakeBlob(this.data.join(""),type,"raw")},FBB_proto.toString=function(){return"[object BlobBuilder]"},FB_proto.slice=function(start,end,type){var args=arguments.length;return args<3&&(type=null),new FakeBlob(this.data.slice(start,args>1?end:this.data.length),type,this.encoding)},FB_proto.toString=function(){return"[object Blob]"},FB_proto.close=function(){this.size=0,delete this.data},FakeBlobBuilder}(view);view.Blob=function(blobParts,options){var type=options?options.type||"":"",builder=new BlobBuilder;if(blobParts)for(var i=0,len=blobParts.length;i<len;i++)Uint8Array&&blobParts[i]instanceof Uint8Array?builder.append(blobParts[i].buffer):builder.append(blobParts[i]);var blob=builder.getBlob(type);return!blob.slice&&blob.webkitSlice&&(blob.slice=blob.webkitSlice),blob};var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__};view.Blob.prototype=getPrototypeOf(new view.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function($){"use strict";var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||1==version[0]&&9==version[1]&&version[2]<1||version[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one("bsTransitionEnd",function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})}var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.7",Alert.TRANSITION_DURATION=150,Alert.prototype.close=function(e){function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$("#"===selector?[]:selector);e&&e.preventDefault(),$parent.length||($parent=$this.closest(".alert")),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement())};var old=$.fn.alert;$.fn.alert=Plugin,$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})}var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.VERSION="3.3.7",Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",null==data.resetText&&$el.data("resetText",$el[val]()),setTimeout($.proxy(function(){$el[val](null==data[state]?this.options[state]:data[state]),"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d).prop(d,!0)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d).prop(d,!1))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")?($input.prop("checked")&&(changed=!1),$parent.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==$input.prop("type")&&($input.prop("checked")!==this.$element.hasClass("active")&&(changed=!1),this.$element.toggleClass("active")),$input.prop("checked",this.$element.hasClass("active")),changed&&$input.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=Plugin,$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target).closest(".btn");Plugin.call($btn,"toggle"),$(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),$btn.is("input,button")?$btn.trigger("focus"):$btn.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.carousel"),options=$.extend({},Carousel.DEFAULTS,$this.data(),"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("bs.carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})}var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.7",Carousel.TRANSITION_DURATION=600,Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},Carousel.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},Carousel.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},Carousel.prototype.getItemIndex=function(item){return this.$items=item.parent().children(".item"),this.$items.index(item||this.$active)},Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active);if(("prev"==direction&&0===activeIndex||"next"==direction&&activeIndex==this.$items.length-1)&&!this.options.wrap)return active;var delta="prev"==direction?-1:1,itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)},Carousel.prototype.to=function(pos){var that=this,activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(pos>this.$items.length-1||pos<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))},Carousel.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},Carousel.prototype.next=function(){if(!this.sliding)return this.slide("next")},Carousel.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||this.getItemForDirection(type,$active),isCycling=this.interval,direction="next"==type?"left":"right",that=this;if($next.hasClass("active"))return this.sliding=!1;var relatedTarget=$next[0],slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if(this.$element.trigger(slideEvent),!slideEvent.isDefaultPrevented()){if(this.sliding=!0,isCycling&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});return $.support.transition&&this.$element.hasClass("slide")?($next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)):($active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger(slidEvent)),isCycling&&this.cycle(),this}};var old=$.fn.carousel;$.fn.carousel=Plugin,$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this};var clickHandler=function(e){var href,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if($target.hasClass("carousel")){var options=$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");slideIndex&&(options.interval=!1),Plugin.call($target,options),slideIndex&&$target.data("bs.carousel").to(slideIndex),e.preventDefault()}};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery),function($){"use strict";function getTargetFromTrigger($trigger){var href,target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&/show|hide/.test(option)&&(options.toggle=!1),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})}var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],[data-toggle="collapse"][data-target="#'+element.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};Collapse.VERSION="3.3.7",Collapse.TRANSITION_DURATION=350,Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var activesData,actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(actives&&actives.length&&(activesData=actives.data("bs.collapse"))&&activesData.transitioning)){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){actives&&actives.length&&(Plugin.call(actives,"hide"),activesData||actives.data("bs.collapse",null));var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])}}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()},Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen),$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};var old=$.fn.collapse;$.fn.collapse=Plugin,$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);$this.attr("data-target")||e.preventDefault();var $target=getTargetFromTrigger($this),data=$target.data("bs.collapse"),option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery),function($){"use strict";function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){e&&3===e.which||($(backdrop).remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)||($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget)))))}))}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})}var backdrop=".dropdown-backdrop",toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.7",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var $items=$parent.find(".dropdown-menu li:not(.disabled):visible a");if($items.length){var index=$items.index(e.target);38==e.which&&index>0&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=Plugin,$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery),function($){"use strict";function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})}var Modal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.VERSION="3.3.7",Modal.TRANSITION_DURATION=300,Modal.BACKDROP_TRANSITION_DURATION=150,Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){$(e.target).is(that.$element)&&(that.ignoreBackdropClick=!0)})}),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),that.adjustDialog(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in"),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},Modal.prototype.resize=function(){this.isShown?$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.$body.removeClass("modal-open"),that.resetAdjustments(),that.resetScrollbar(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(this.ignoreBackdropClick)return void(this.ignoreBackdropClick=!1);e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop(),callback&&callback()}
;$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()},Modal.prototype.handleUpdate=function(){this.adjustDialog()},Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})},Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth,this.scrollbarWidth=this.measureScrollbar()},Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",bodyPad+this.scrollbarWidth)},Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return this.$body[0].removeChild(scrollDiv),scrollbarWidth};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.one("show.bs.modal",function(showEvent){showEvent.isDefaultPrevented()||$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})}),Plugin.call($target,option,this)})}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;!data&&/destroy|hide/.test(option)||(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})}var Tooltip=function(element,options){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",element,options)};Tooltip.VERSION="3.3.7",Tooltip.TRANSITION_DURATION=150,Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},Tooltip.prototype.init=function(type,element,options){if(this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),obj instanceof $.Event&&(self.inState["focusin"==obj.type?"focus":"hover"]=!0),self.tip().hasClass("in")||"in"==self.hoverState?void(self.hoverState="in"):(clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show())},Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState)if(this.inState[key])return!0;return!1},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),obj instanceof $.Event&&(self.inState["focusout"==obj.type?"focus":"hover"]=!1),!self.isInStateTrue()){if(clearTimeout(self.timeout),self.hoverState="out",!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)}},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,viewportDim=this.getPosition(this.$viewport);placement="bottom"==placement&&pos.bottom+actualHeight>viewportDim.bottom?"top":"top"==placement&&pos.top-actualHeight<viewportDim.top?"bottom":"right"==placement&&pos.right+actualWidth>viewportDim.width?"left":"left"==placement&&pos.left-actualWidth<viewportDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type),that.hoverState=null,"out"==prevHoverState&&that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top+=marginTop,offset.left+=marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)},Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(callback){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element&&that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type),callback&&callback()}var that=this,$tip=$(this.$tip),e=$.Event("hide.bs."+this.type);if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete(),this.hoverState=null,this},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0],isBody="BODY"==el.tagName,elRect=el.getBoundingClientRect();null==elRect.width&&(elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var isSvg=window.SVGElement&&el instanceof window.SVGElement,elOffset=isBody?{top:0,left:0}:isSvg?null:$element.offset(),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()},outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.right&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},Tooltip.prototype.getTitle=function(){var $e=this.$element,o=this.options;return $e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.getUID=function(prefix){do{prefix+=~~(1e6*Math.random())}while(document.getElementById(prefix));return prefix},Tooltip.prototype.tip=function(){if(!this.$tip&&(this.$tip=$(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=this;e&&((self=$(e.currentTarget).data("bs."+this.type))||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),e?(self.inState.click=!self.inState.click,self.isInStateTrue()?self.enter(self):self.leave(self)):self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout),this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type),that.$tip&&that.$tip.detach(),that.$tip=null,that.$arrow=null,that.$viewport=null,that.$element=null})};var old=$.fn.tooltip;$.fn.tooltip=Plugin,$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;!data&&/destroy|hide/.test(option)||(data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})}var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.7",Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var old=$.fn.popover;$.fn.popover=Plugin,$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),function($){"use strict";function ScrollSpy(element,options){this.$body=$(document.body),this.$scrollElement=$($(element).is(document.body)?window:element),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this)),this.refresh(),this.process()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})}ScrollSpy.VERSION="3.3.7",ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},ScrollSpy.prototype.refresh=function(){var that=this,offsetMethod="offset",offsetBase=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),$.isWindow(this.$scrollElement[0])||(offsetMethod="position",offsetBase=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]),that.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.getScrollHeight(),maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(this.scrollHeight!=scrollHeight&&this.refresh(),scrollTop>=maxScroll)return activeTarget!=(i=targets[targets.length-1])&&this.activate(i);if(activeTarget&&scrollTop<offsets[0])return this.activeTarget=null,this.clear();for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(void 0===offsets[i+1]||scrollTop<offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parents("li").addClass("active");active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate.bs.scrollspy")},ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var old=$.fn.scrollspy;$.fn.scrollspy=Plugin,$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})}var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.7",Tab.TRANSITION_DURATION=150,Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var $previous=$ul.find(".active:last a"),hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]}),showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});if($previous.trigger(hideEvent),$this.trigger(showEvent),!showEvent.isDefaultPrevented()&&!hideEvent.isDefaultPrevented()){var $target=$(selector);this.activate($this.closest("li"),$ul),this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]}),$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu").length&&element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=Plugin,$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this};var clickHandler=function(e){e.preventDefault(),Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery),function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})}var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(element),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};Affix.VERSION="3.3.7",Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0,target:window},Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop(),position=this.$element.offset(),targetHeight=this.$target.height();if(null!=offsetTop&&"top"==this.affixed)return scrollTop<offsetTop&&"top";if("bottom"==this.affixed)return null!=offsetTop?!(scrollTop+this.unpin<=position.top)&&"bottom":!(scrollTop+targetHeight<=scrollHeight-offsetBottom)&&"bottom";var initializing=null==this.affixed,colliderTop=initializing?scrollTop:position.top,colliderHeight=initializing?targetHeight:height;return null!=offsetTop&&scrollTop<=offsetTop?"top":null!=offsetBottom&&colliderTop+colliderHeight>=scrollHeight-offsetBottom&&"bottom"},Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop(),position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var height=this.$element.height(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom,scrollHeight=Math.max($(document).height(),$(document.body).height());"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top(this.$element)),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom(this.$element));var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){null!=this.unpin&&this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:""),e=$.Event(affixType+".bs.affix");if(this.$element.trigger(e),e.isDefaultPrevented())return;this.affixed=affix,this.unpin="bottom"==affix?this.getPinnedOffset():null,this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}"bottom"==affix&&this.$element.offset({top:scrollHeight-height-offsetBottom})}};var old=$.fn.affix;$.fn.affix=Plugin,$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},null!=data.offsetBottom&&(data.offset.bottom=data.offsetBottom),null!=data.offsetTop&&(data.offset.top=data.offsetTop),Plugin.call($spy,data)})})}(jQuery);var saveAs=saveAs||function(view){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},is_safari=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},fs_min_size=0,revoke=function(file){var revoker=function(){"string"==typeof file?get_URL().revokeObjectURL(file):file.remove()};setTimeout(revoker,4e4)},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);for(var i=event_types.length;i--;){var listener=filesaver["on"+event_types[i]];if("function"==typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}},auto_bom=function(blob){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)?new Blob(["\ufeff",blob],{type:blob.type}):blob},FileSaver=function(blob,name,no_auto_bom){no_auto_bom||(blob=auto_bom(blob));var object_url,target_view,slice,filesaver=this,type=blob.type,blob_changed=!1,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if(target_view&&is_safari&&"undefined"!=typeof FileReader){var reader=new FileReader;return reader.onloadend=function(){var base64Data=reader.result;target_view.location.href="data:attachment/file"+base64Data.slice(base64Data.search(/[,;]/)),filesaver.readyState=filesaver.DONE,dispatch_all()},reader.readAsDataURL(blob),void(filesaver.readyState=filesaver.INIT)}if(!blob_changed&&object_url||(object_url=get_URL().createObjectURL(blob)),target_view)target_view.location.href=object_url;else{void 0===view.open(object_url,"_blank")&&is_safari&&(view.location.href=object_url)}filesaver.readyState=filesaver.DONE,dispatch_all(),revoke(object_url)},abortable=function(func){return function(){if(filesaver.readyState!==filesaver.DONE)return func.apply(this,arguments)}},create_if_not_found={create:!0,exclusive:!1};return filesaver.readyState=filesaver.INIT,name||(name="download"),can_use_save_link?(object_url=get_URL().createObjectURL(blob),void setTimeout(function(){save_link.href=object_url,save_link.download=name,click(save_link),dispatch_all(),revoke(object_url),filesaver.readyState=filesaver.DONE})):(view.chrome&&type&&"application/octet-stream"!==type&&(slice=blob.slice||blob.webkitSlice,blob=slice.call(blob,0,blob.size,"application/octet-stream"),blob_changed=!0),webkit_req_fs&&"download"!==name&&(name+=".download"),("application/octet-stream"===type||webkit_req_fs)&&(target_view=view),req_fs?(fs_min_size+=blob.size,void req_fs(view.TEMPORARY,fs_min_size,abortable(function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable(function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable(function(file){file.createWriter(abortable(function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL(),filesaver.readyState=filesaver.DONE,dispatch(filesaver,"writeend",event),revoke(file)},writer.onerror=function(){var error=writer.error;error.code!==error.ABORT_ERR&&fs_error()},"writestart progress write abort".split(" ").forEach(function(event){writer["on"+event]=filesaver["on"+event]}),writer.write(blob),filesaver.abort=function(){writer.abort(),filesaver.readyState=filesaver.DONE},filesaver.readyState=filesaver.WRITING}),fs_error)}),fs_error)};dir.getFile(name,{create:!1},abortable(function(file){file.remove(),save()}),abortable(function(ex){ex.code===ex.NOT_FOUND_ERR?save():fs_error()}))}),fs_error)}),fs_error)):void fs_error())},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name,no_auto_bom)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(blob,name,no_auto_bom){return no_auto_bom||(blob=auto_bom(blob)),navigator.msSaveOrOpenBlob(blob,name||"download")}:(FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE,dispatch(filesaver,"abort")},FS_proto.readyState=FS_proto.INIT=0,FS_proto.WRITING=1,FS_proto.DONE=2,FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null,saveAs)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return saveAs}),function(){var Class;!function(){var initializing=!1,fnTest=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function extend(prop){function Class(){!initializing&&this.init&&this.init.apply(this,arguments)}var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}(name,prop[name]):prop[name];return Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=extend,Class}}(),function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:void 0};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}(),function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)})}(),function(){Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)})}();var $isplainobject=function(obj){return!("object"!=typeof obj||obj.nodeType||null!==obj&&obj===obj.window)&&!(obj.constructor&&!Object.prototype.hasOwnProperty.call(obj.constructor.prototype,"isPrototypeOf"))},$extend=function(destination){var source,i,property;for(i=1;i<arguments.length;i++){source=arguments[i];for(property in source)source.hasOwnProperty(property)&&(source[property]&&$isplainobject(source[property])?(destination.hasOwnProperty(property)||(destination[property]={}),$extend(destination[property],source[property])):destination[property]=source[property])}return destination},$each=function(obj,callback){if(obj&&"object"==typeof obj){var i;if(Array.isArray(obj)||"number"==typeof obj.length&&obj.length>0&&obj.length-1 in obj){for(i=0;i<obj.length;i++)if(!1===callback(i,obj[i]))return}else if(Object.keys){var keys=Object.keys(obj);for(i=0;i<keys.length;i++)if(!1===callback(keys[i],obj[keys[i]]))return}else for(i in obj)if(obj.hasOwnProperty(i)&&!1===callback(i,obj[i]))return}},$trigger=function(el,event){
var e=document.createEvent("HTMLEvents");e.initEvent(event,!0,!0),el.dispatchEvent(e)},JSONEditor=function(element,options){if(!(element instanceof Element))throw new Error("element should be an instance of Element");options=$extend({},JSONEditor.defaults.options,options||{}),this.element=element,this.options=options,this.init()};JSONEditor.prototype={constructor:JSONEditor,init:function(){var self=this;this.ready=!1;var theme_class=JSONEditor.defaults.themes[this.options.theme||JSONEditor.defaults.theme];if(!theme_class)throw"Unknown theme "+(this.options.theme||JSONEditor.defaults.theme);this.schema=this.options.schema,this.theme=new theme_class,this.template=this.options.template,this.refs=this.options.refs||{},this.uuid=0,this.__data={};var icon_class=JSONEditor.defaults.iconlibs[this.options.iconlib||JSONEditor.defaults.iconlib];icon_class&&(this.iconlib=new icon_class),this.root_container=this.theme.getContainer(),this.element.appendChild(this.root_container),this.translate=this.options.translate||JSONEditor.defaults.translate,this._loadExternalRefs(this.schema,function(){self._getDefinitions(self.schema);var validator_options={};self.options.custom_validators&&(validator_options.custom_validators=self.options.custom_validators),self.validator=new JSONEditor.Validator(self,null,validator_options);var editor_class=self.getEditorClass(self.schema);self.root=self.createEditor(editor_class,{jsoneditor:self,schema:self.schema,required:!0,container:self.root_container}),self.root.preBuild(),self.root.build(),self.root.postBuild(),self.options.startval&&self.root.setValue(self.options.startval),self.validation_results=self.validator.validate(self.root.getValue()),self.root.showValidationErrors(self.validation_results),self.ready=!0,window.requestAnimationFrame(function(){self.ready&&(self.validation_results=self.validator.validate(self.root.getValue()),self.root.showValidationErrors(self.validation_results),self.trigger("ready"),self.trigger("change"))})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(value){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(value),this},validate:function(value){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";return 1===arguments.length?this.validator.validate(value):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(event,callback){return this.callbacks=this.callbacks||{},this.callbacks[event]=this.callbacks[event]||[],this.callbacks[event].push(callback),this},off:function(event,callback){if(event&&callback){this.callbacks=this.callbacks||{},this.callbacks[event]=this.callbacks[event]||[];for(var newcallbacks=[],i=0;i<this.callbacks[event].length;i++)this.callbacks[event][i]!==callback&&newcallbacks.push(this.callbacks[event][i]);this.callbacks[event]=newcallbacks}else event?(this.callbacks=this.callbacks||{},this.callbacks[event]=[]):this.callbacks={};return this},trigger:function(event){if(this.callbacks&&this.callbacks[event]&&this.callbacks[event].length)for(var i=0;i<this.callbacks[event].length;i++)this.callbacks[event][i]();return this},setOption:function(option,value){if("show_errors"!==option)throw"Option "+option+" must be set during instantiation and cannot be changed later";return this.options.show_errors=value,this.onChange(),this},getEditorClass:function(schema){var classname;if(schema=this.expandSchema(schema),$each(JSONEditor.defaults.resolvers,function(i,resolver){var tmp=resolver(schema);if(tmp&&JSONEditor.defaults.editors[tmp])return classname=tmp,!1}),!classname)throw"Unknown editor for schema "+JSON.stringify(schema);if(!JSONEditor.defaults.editors[classname])throw"Unknown editor "+classname;return JSONEditor.defaults.editors[classname]},createEditor:function(editor_class,options){return options=$extend({},editor_class.options||{},options),new editor_class(options)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var self=this;return window.requestAnimationFrame(function(){self.firing_change=!1,self.ready&&(self.validation_results=self.validator.validate(self.root.getValue()),"never"!==self.options.show_errors?self.root.showValidationErrors(self.validation_results):self.root.showValidationErrors([]),self.trigger("change"))}),this}},compileTemplate:function(template,name){name=name||JSONEditor.defaults.template;var engine;if("string"==typeof name){if(!JSONEditor.defaults.templates[name])throw"Unknown template engine "+name;if(!(engine=JSONEditor.defaults.templates[name]()))throw"Template engine "+name+" missing required library."}else engine=name;if(!engine)throw"No template engine set";if(!engine.compile)throw"Invalid template engine set";return engine.compile(template)},_data:function(el,key,value){if(3!==arguments.length)return el.hasAttribute("data-jsoneditor-"+key)?this.__data[el.getAttribute("data-jsoneditor-"+key)]:null;var uuid;el.hasAttribute("data-jsoneditor-"+key)?uuid=el.getAttribute("data-jsoneditor-"+key):(uuid=this.uuid++,el.setAttribute("data-jsoneditor-"+key,uuid)),this.__data[uuid]=value},registerEditor:function(editor){return this.editors=this.editors||{},this.editors[editor.path]=editor,this},unregisterEditor:function(editor){return this.editors=this.editors||{},this.editors[editor.path]=null,this},getEditor:function(path){if(this.editors)return this.editors[path]},watch:function(path,callback){return this.watchlist=this.watchlist||{},this.watchlist[path]=this.watchlist[path]||[],this.watchlist[path].push(callback),this},unwatch:function(path,callback){if(!this.watchlist||!this.watchlist[path])return this;if(!callback)return this.watchlist[path]=null,this;for(var newlist=[],i=0;i<this.watchlist[path].length;i++)this.watchlist[path][i]!==callback&&newlist.push(this.watchlist[path][i]);return this.watchlist[path]=newlist.length?newlist:null,this},notifyWatchers:function(path){if(!this.watchlist||!this.watchlist[path])return this;for(var i=0;i<this.watchlist[path].length;i++)this.watchlist[path][i]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(schema,path){if(path=path||"#/definitions/",schema.definitions)for(var i in schema.definitions)schema.definitions.hasOwnProperty(i)&&(this.refs[path+i]=schema.definitions[i],schema.definitions[i].definitions&&this._getDefinitions(schema.definitions[i],path+i+"/definitions/"))},_getExternalRefs:function(schema){var refs={},merge_refs=function(newrefs){for(var i in newrefs)newrefs.hasOwnProperty(i)&&(refs[i]=!0)};schema.$ref&&"object"!=typeof schema.$ref&&"#"!==schema.$ref.substr(0,1)&&!this.refs[schema.$ref]&&(refs[schema.$ref]=!0);for(var i in schema)if(schema.hasOwnProperty(i))if(schema[i]&&"object"==typeof schema[i]&&Array.isArray(schema[i]))for(var j=0;j<schema[i].length;j++)"object"==typeof schema[i][j]&&merge_refs(this._getExternalRefs(schema[i][j]));else schema[i]&&"object"==typeof schema[i]&&merge_refs(this._getExternalRefs(schema[i]));return refs},_loadExternalRefs:function(schema,callback){var self=this,refs=this._getExternalRefs(schema),done=0,waiting=0,callback_fired=!1;$each(refs,function(url){if(!self.refs[url]){if(!self.options.ajax)throw"Must set ajax option to true to load external ref "+url;self.refs[url]="loading",waiting++;var r=new XMLHttpRequest;r.open("GET",url,!0),r.onreadystatechange=function(){if(4==r.readyState){if(200!==r.status)throw window.console.log(r),"Failed to fetch ref via ajax- "+url;var response;try{response=JSON.parse(r.responseText)}catch(e){throw window.console.log(e),"Failed to parse external ref "+url}if(!response||"object"!=typeof response)throw"External ref does not contain a valid schema - "+url;self.refs[url]=response,self._loadExternalRefs(response,function(){++done>=waiting&&!callback_fired&&(callback_fired=!0,callback())})}},r.send()}}),waiting||callback()},expandRefs:function(schema){for(schema=$extend({},schema);schema.$ref;){var ref=schema.$ref;delete schema.$ref,this.refs[ref]||(ref=decodeURIComponent(ref)),schema=this.extendSchemas(schema,this.refs[ref])}return schema},expandSchema:function(schema){var i,self=this,extended=$extend({},schema);if("object"==typeof schema.type&&(Array.isArray(schema.type)?$each(schema.type,function(key,value){"object"==typeof value&&(schema.type[key]=self.expandSchema(value))}):schema.type=self.expandSchema(schema.type)),"object"==typeof schema.disallow&&(Array.isArray(schema.disallow)?$each(schema.disallow,function(key,value){"object"==typeof value&&(schema.disallow[key]=self.expandSchema(value))}):schema.disallow=self.expandSchema(schema.disallow)),schema.anyOf&&$each(schema.anyOf,function(key,value){schema.anyOf[key]=self.expandSchema(value)}),schema.dependencies&&$each(schema.dependencies,function(key,value){"object"!=typeof value||Array.isArray(value)||(schema.dependencies[key]=self.expandSchema(value))}),schema.not&&(schema.not=this.expandSchema(schema.not)),schema.allOf){for(i=0;i<schema.allOf.length;i++)extended=this.extendSchemas(extended,this.expandSchema(schema.allOf[i]));delete extended.allOf}if(schema.extends){if(Array.isArray(schema.extends))for(i=0;i<schema.extends.length;i++)extended=this.extendSchemas(extended,this.expandSchema(schema.extends[i]));else extended=this.extendSchemas(extended,this.expandSchema(schema.extends));delete extended.extends}if(schema.oneOf){var tmp=$extend({},extended);for(delete tmp.oneOf,i=0;i<schema.oneOf.length;i++)extended.oneOf[i]=this.extendSchemas(this.expandSchema(schema.oneOf[i]),tmp)}return this.expandRefs(extended)},extendSchemas:function(obj1,obj2){obj1=$extend({},obj1),obj2=$extend({},obj2);var self=this,extended={};return $each(obj1,function(prop,val){void 0!==obj2[prop]?"required"!==prop&&"defaultProperties"!==prop||"object"!=typeof val||!Array.isArray(val)?"type"!==prop||"string"!=typeof val&&!Array.isArray(val)?"object"==typeof val&&Array.isArray(val)?extended[prop]=val.filter(function(n){return-1!==obj2[prop].indexOf(n)}):extended[prop]="object"==typeof val&&null!==val?self.extendSchemas(val,obj2[prop]):val:("string"==typeof val&&(val=[val]),"string"==typeof obj2.type&&(obj2.type=[obj2.type]),obj2.type&&obj2.type.length?extended.type=val.filter(function(n){return-1!==obj2.type.indexOf(n)}):extended.type=val,1===extended.type.length&&"string"==typeof extended.type[0]?extended.type=extended.type[0]:0===extended.type.length&&delete extended.type):extended[prop]=val.concat(obj2[prop]).reduce(function(p,c){return p.indexOf(c)<0&&p.push(c),p},[]):extended[prop]=val}),$each(obj2,function(prop,val){void 0===obj1[prop]&&(extended[prop]=val)}),extended}},JSONEditor.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]},JSONEditor.Validator=Class.extend({init:function(jsoneditor,schema,options){this.jsoneditor=jsoneditor,this.schema=schema||this.jsoneditor.schema,this.options=options||{},this.translate=this.jsoneditor.translate||JSONEditor.defaults.translate},validate:function(value){return this._validateSchema(this.schema,value)},_validateSchema:function(schema,value,path){var valid,i,j,self=this,errors=[],stringified=JSON.stringify(value);if(path=path||"root",schema=$extend({},this.jsoneditor.expandRefs(schema)),schema.required&&!0===schema.required){if(void 0===value)return errors.push({path:path,property:"required",message:this.translate("error_notset")}),errors}else if(void 0===value){if(!this.jsoneditor.options.required_by_default)return errors;errors.push({path:path,property:"required",message:this.translate("error_notset")})}if(schema.enum){for(valid=!1,i=0;i<schema.enum.length;i++)stringified===JSON.stringify(schema.enum[i])&&(valid=!0);valid||errors.push({path:path,property:"enum",message:this.translate("error_enum")})}if(schema.extends)for(i=0;i<schema.extends.length;i++)errors=errors.concat(this._validateSchema(schema.extends[i],value,path));if(schema.allOf)for(i=0;i<schema.allOf.length;i++)errors=errors.concat(this._validateSchema(schema.allOf[i],value,path));if(schema.anyOf){for(valid=!1,i=0;i<schema.anyOf.length;i++)if(!this._validateSchema(schema.anyOf[i],value,path).length){valid=!0;break}valid||errors.push({path:path,property:"anyOf",message:this.translate("error_anyOf")})}if(schema.oneOf){valid=0;var oneof_errors=[];for(i=0;i<schema.oneOf.length;i++){var tmp=this._validateSchema(schema.oneOf[i],value,path);for(tmp.length||valid++,j=0;j<tmp.length;j++)tmp[j].path=path+".oneOf["+i+"]"+tmp[j].path.substr(path.length);oneof_errors=oneof_errors.concat(tmp)}1!==valid&&(errors.push({path:path,property:"oneOf",message:this.translate("error_oneOf",[valid])}),errors=errors.concat(oneof_errors))}if(schema.not&&(this._validateSchema(schema.not,value,path).length||errors.push({path:path,property:"not",message:this.translate("error_not")})),schema.type)if(Array.isArray(schema.type)){for(valid=!1,i=0;i<schema.type.length;i++)if(this._checkType(schema.type[i],value)){valid=!0;break}valid||errors.push({path:path,property:"type",message:this.translate("error_type_union")})}else this._checkType(schema.type,value)||errors.push({path:path,property:"type",message:this.translate("error_type",[schema.type])});if(schema.disallow)if(Array.isArray(schema.disallow)){for(valid=!0,i=0;i<schema.disallow.length;i++)if(this._checkType(schema.disallow[i],value)){valid=!1;break}valid||errors.push({path:path,property:"disallow",message:this.translate("error_disallow_union")})}else this._checkType(schema.disallow,value)&&errors.push({path:path,property:"disallow",message:this.translate("error_disallow",[schema.disallow])});if("number"==typeof value){if(schema.multipleOf||schema.divisibleBy){var divisor=schema.multipleOf||schema.divisibleBy;valid=value/divisor===Math.floor(value/divisor),window.math?valid=window.math.mod(window.math.bignumber(value),window.math.bignumber(divisor)).equals(0):window.Decimal&&(valid=new window.Decimal(value).mod(new window.Decimal(divisor)).equals(0)),valid||errors.push({path:path,property:schema.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[divisor])})}schema.hasOwnProperty("maximum")&&(valid=schema.exclusiveMaximum?value<schema.maximum:value<=schema.maximum,window.math?valid=window.math[schema.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(value),window.math.bignumber(schema.maximum)):window.Decimal&&(valid=new window.Decimal(value)[schema.exclusiveMaximum?"lt":"lte"](new window.Decimal(schema.maximum))),valid||errors.push({path:path,property:"maximum",message:this.translate(schema.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[schema.maximum])})),schema.hasOwnProperty("minimum")&&(valid=schema.exclusiveMinimum?value>schema.minimum:value>=schema.minimum,window.math?valid=window.math[schema.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(value),window.math.bignumber(schema.minimum)):window.Decimal&&(valid=new window.Decimal(value)[schema.exclusiveMinimum?"gt":"gte"](new window.Decimal(schema.minimum))),valid||errors.push({path:path,property:"minimum",message:this.translate(schema.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[schema.minimum])}))}else if("string"==typeof value)schema.maxLength&&(value+"").length>schema.maxLength&&errors.push({path:path,property:"maxLength",message:this.translate("error_maxLength",[schema.maxLength])}),schema.minLength&&(value+"").length<schema.minLength&&errors.push({path:path,property:"minLength",message:this.translate(1===schema.minLength?"error_notempty":"error_minLength",[schema.minLength])}),schema.pattern&&(new RegExp(schema.pattern).test(value)||errors.push({path:path,property:"pattern",message:this.translate("error_pattern",[schema.pattern])}));else if("object"==typeof value&&null!==value&&Array.isArray(value)){if(schema.items)if(Array.isArray(schema.items))for(i=0;i<value.length;i++)if(schema.items[i])errors=errors.concat(this._validateSchema(schema.items[i],value[i],path+"."+i));else{if(!0===schema.additionalItems)break;if(!schema.additionalItems){if(!1===schema.additionalItems){errors.push({path:path,property:"additionalItems",message:this.translate("error_additionalItems")});break}break}errors=errors.concat(this._validateSchema(schema.additionalItems,value[i],path+"."+i))}else for(i=0;i<value.length;i++)errors=errors.concat(this._validateSchema(schema.items,value[i],path+"."+i));if(schema.maxItems&&value.length>schema.maxItems&&errors.push({path:path,property:"maxItems",message:this.translate("error_maxItems",[schema.maxItems])}),schema.minItems&&value.length<schema.minItems&&errors.push({path:path,property:"minItems",message:this.translate("error_minItems",[schema.minItems])}),schema.uniqueItems){var seen={};for(i=0;i<value.length;i++){if(valid=JSON.stringify(value[i]),seen[valid]){errors.push({path:path,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}seen[valid]=!0}}}else if("object"==typeof value&&null!==value){if(schema.maxProperties){valid=0;for(i in value)value.hasOwnProperty(i)&&valid++;valid>schema.maxProperties&&errors.push({path:path,property:"maxProperties",message:this.translate("error_maxProperties",[schema.maxProperties])})}if(schema.minProperties){valid=0;for(i in value)value.hasOwnProperty(i)&&valid++;valid<schema.minProperties&&errors.push({path:path,property:"minProperties",message:this.translate("error_minProperties",[schema.minProperties])})}if(schema.required&&Array.isArray(schema.required))for(i=0;i<schema.required.length;i++)void 0===value[schema.required[i]]&&errors.push({path:path,property:"required",message:this.translate("error_required",[schema.required[i]])});var validated_properties={};if(schema.properties)for(i in schema.properties)schema.properties.hasOwnProperty(i)&&(validated_properties[i]=!0,errors=errors.concat(this._validateSchema(schema.properties[i],value[i],path+"."+i)));if(schema.patternProperties)for(i in schema.patternProperties)if(schema.patternProperties.hasOwnProperty(i)){var regex=new RegExp(i);for(j in value)value.hasOwnProperty(j)&&regex.test(j)&&(validated_properties[j]=!0,errors=errors.concat(this._validateSchema(schema.patternProperties[i],value[j],path+"."+j)))}if(void 0!==schema.additionalProperties||!this.jsoneditor.options.no_additional_properties||schema.oneOf||schema.anyOf||(schema.additionalProperties=!1),void 0!==schema.additionalProperties)for(i in value)if(value.hasOwnProperty(i)&&!validated_properties[i]){if(!schema.additionalProperties){errors.push({path:path,property:"additionalProperties",message:this.translate("error_additional_properties",[i])});break}if(!0===schema.additionalProperties)break;errors=errors.concat(this._validateSchema(schema.additionalProperties,value[i],path+"."+i))}if(schema.dependencies)for(i in schema.dependencies)if(schema.dependencies.hasOwnProperty(i)&&void 0!==value[i])if(Array.isArray(schema.dependencies[i]))for(j=0;j<schema.dependencies[i].length;j++)void 0===value[schema.dependencies[i][j]]&&errors.push({path:path,property:"dependencies",message:this.translate("error_dependency",[schema.dependencies[i][j]])});else errors=errors.concat(this._validateSchema(schema.dependencies[i],value,path))}return $each(JSONEditor.defaults.custom_validators,function(i,validator){errors=errors.concat(validator.call(self,schema,value,path))}),this.options.custom_validators&&$each(this.options.custom_validators,function(i,validator){errors=errors.concat(validator.call(self,schema,value,path))}),errors},_checkType:function(type,value){return"string"==typeof type?"string"===type?"string"==typeof value:"number"===type?"number"==typeof value:"integer"===type?"number"==typeof value&&value===Math.floor(value):"boolean"===type?"boolean"==typeof value:"array"===type?Array.isArray(value):"object"===type?null!==value&&!Array.isArray(value)&&"object"==typeof value:"null"!==type||null===value:!this._validateSchema(type,value).length}}),JSONEditor.AbstractEditor=Class.extend({onChildEditorChange:function(editor){this.onChange(!0)},notify:function(){this.jsoneditor.notifyWatchers(this.path)},change:function(){this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange()},onChange:function(bubble){this.notify(),this.watch_listener&&this.watch_listener(),bubble&&this.change()},register:function(){this.jsoneditor.registerEditor(this),this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(options){this.jsoneditor=options.jsoneditor,this.theme=this.jsoneditor.theme,this.template_engine=this.jsoneditor.template,this.iconlib=this.jsoneditor.iconlib,this.translate=this.jsoneditor.translate||JSONEditor.defaults.translate,this.original_schema=options.schema,this.schema=this.jsoneditor.expandSchema(this.original_schema),this.options=$extend({},this.options||{},options.schema.options||{},options),options.path||this.schema.id||(this.schema.id="root"),this.path=options.path||"root",this.formname=options.formname||this.path.replace(/\.([^.]+)/g,"[$1]"),this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"[")),this.key=this.path.split(".").pop(),this.parent=options.parent,this.link_watchers=[],options.container&&this.setContainer(options.container)},setContainer:function(container){this.container=container,this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id),this.schema.type&&"string"==typeof this.schema.type&&this.container.setAttribute("data-schematype",this.schema.type),this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners(),this.addLinks(),this.setValue(this.getDefault(),!0),this.updateHeaderText(),this.register(),this.onWatchedFieldChange()},setupWatchListeners:function(){var self=this;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){self.refreshWatchedFieldValues()&&self.onWatchedFieldChange()},this.register(),this.schema.hasOwnProperty("watch")){var path,path_parts,first,root,adjusted_path;for(var name in this.schema.watch)if(this.schema.watch.hasOwnProperty(name)){if(path=this.schema.watch[name],Array.isArray(path)){if(path.length<2)continue;path_parts=[path[0]].concat(path[1].split("."))}else path_parts=path.split("."),self.theme.closest(self.container,'[data-schemaid="'+path_parts[0]+'"]')||path_parts.unshift("#");if(first=path_parts.shift(),"#"===first&&(first=self.jsoneditor.schema.id||"root"),!(root=self.theme.closest(self.container,'[data-schemaid="'+first+'"]')))throw"Could not find ancestor node with id "+first;adjusted_path=root.getAttribute("data-schemapath")+"."+path_parts.join("."),self.jsoneditor.watch(adjusted_path,self.watch_listener),self.watched[name]=adjusted_path}}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links))for(var i=0;i<this.schema.links.length;i++)this.addLink(this.getLink(this.schema.links[i]))},getButton:function(text,icon,title){var btnClass="json-editor-btn-"+icon;!(icon=this.iconlib?this.iconlib.getIcon(icon):null)&&title&&(text=title,title=null);var btn=this.theme.getButton(text,icon,title);return btn.className+=" "+btnClass+" ",btn},setButtonText:function(button,text,icon,title){return icon=this.iconlib?this.iconlib.getIcon(icon):null,!icon&&title&&(text=title,title=null),this.theme.setButtonText(button,text,icon,title)},addLink:function(link){this.link_holder&&this.link_holder.appendChild(link)},getLink:function(data){var holder,link,mime=data.mediaType||"application/javascript",type=mime.split("/")[0],href=this.jsoneditor.compileTemplate(data.href,this.template_engine),download=null;if(data.download&&(download=data.download),download&&!0!==download&&(download=this.jsoneditor.compileTemplate(download,this.template_engine)),"image"===type){holder=this.theme.getBlockLinkHolder(),link=document.createElement("a"),link.setAttribute("target","_blank");var image=document.createElement("img");this.theme.createImageLink(holder,link,image),this.link_watchers.push(function(vars){var url=href(vars);link.setAttribute("href",url),link.setAttribute("title",data.rel||url),image.setAttribute("src",url)})}else if(["audio","video"].indexOf(type)>=0){holder=this.theme.getBlockLinkHolder(),link=this.theme.getBlockLink(),link.setAttribute("target","_blank");var media=document.createElement(type);media.setAttribute("controls","controls"),this.theme.createMediaLink(holder,link,media),this.link_watchers.push(function(vars){var url=href(vars);link.setAttribute("href",url),link.textContent=data.rel||url,media.setAttribute("src",url)})}else link=holder=this.theme.getBlockLink(),holder.setAttribute("target","_blank"),holder.textContent=data.rel,this.link_watchers.push(function(vars){var url=href(vars);holder.setAttribute("href",url),holder.textContent=data.rel||url});return download&&link&&(!0===download?link.setAttribute("download",""):this.link_watchers.push(function(vars){link.setAttribute("download",download(vars))})),data.class&&(link.className=link.className+" "+data.class),holder},refreshWatchedFieldValues:function(){if(this.watched_values){var watched={},changed=!1,self=this;if(this.watched){var val,editor;for(var name in this.watched)this.watched.hasOwnProperty(name)&&(editor=self.jsoneditor.getEditor(this.watched[name]),val=editor?editor.getValue():null,self.watched_values[name]!==val&&(changed=!0),watched[name]=val)}return watched.self=this.getValue(),this.watched_values.self!==watched.self&&(changed=!0),this.watched_values=watched,changed}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length){for(var i=0;i<this.header.childNodes.length;i++)if(3===this.header.childNodes[i].nodeType){this.header.childNodes[i].nodeValue=this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(title_only){return this.header_text?this.header_text:title_only?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var vars;if(this.header_template){vars=$extend(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:1*this.key,i1:1*this.key+1,title:this.getTitle()});var header_text=this.header_template(vars);header_text!==this.header_text&&(this.header_text=header_text,this.updateHeaderText(),this.notify())}if(this.link_watchers.length){vars=this.getWatchedFieldValues();for(var i=0;i<this.link_watchers.length;i++)this.link_watchers[i](vars)}},setValue:function(value){this.value=value},getValue:function(){return this.value},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var self=this;this.unregister(this),$each(this.watched,function(name,adjusted_path){self.jsoneditor.unwatch(adjusted_path,self.watch_listener)}),this.watched=null,this.watched_values=null,this.watch_listener=null,this.header_text=null,this.header_template=null,this.value=null,this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null,this.jsoneditor=null,this.schema=null,this.path=null,this.key=null,this.parent=null},getDefault:function(){if(this.schema.default)return this.schema.default;if(this.schema.enum)return this.schema.enum[0];var type=this.schema.type||this.schema.oneOf;if(type&&Array.isArray(type)&&(type=type[0]),type&&"object"==typeof type&&(type=type.type),type&&Array.isArray(type)&&(type=type[0]),"string"==typeof type){if("number"===type)return 0;if("boolean"===type)return!1;if("integer"===type)return 0;if("string"===type)return"";if("object"===type)return{};if("array"===type)return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){return"boolean"==typeof this.schema.required?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.indexOf(this.key)>-1:!!this.jsoneditor.options.required_by_default},getDisplayText:function(arr){var disp=[],used={};$each(arr,function(i,el){el.title&&(used[el.title]=used[el.title]||0,used[el.title]++),el.description&&(used[el.description]=used[el.description]||0,used[el.description]++),el.format&&(used[el.format]=used[el.format]||0,used[el.format]++),el.type&&(used[el.type]=used[el.type]||0,used[el.type]++)}),$each(arr,function(i,el){var name;name="string"==typeof el?el:el.title&&used[el.title]<=1?el.title:el.format&&used[el.format]<=1?el.format:el.type&&used[el.type]<=1?el.type:el.description&&used[el.description]<=1?el.descripton:el.title?el.title:el.format?el.format:el.type?el.type:el.description?el.description:JSON.stringify(el).length<50?JSON.stringify(el):"type",disp.push(name)});var inc={};return $each(disp,function(i,name){inc[name]=inc[name]||0,inc[name]++,used[name]>1&&(disp[i]=name+" "+inc[name])}),disp},getOption:function(key){try{throw"getOption is deprecated"}catch(e){window.console.error(e)}return this.options[key]},showValidationErrors:function(errors){}}),JSONEditor.defaults.editors.null=JSONEditor.AbstractEditor.extend({getValue:function(){return null},setValue:function(){this.onChange()},getNumColumns:function(){return 2}}),JSONEditor.defaults.editors.string=JSONEditor.AbstractEditor.extend({register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},setValue:function(value,initial,from_template){if((!this.template||from_template)&&(null===value||void 0===value?value="":"object"==typeof value?value=JSON.stringify(value):"string"!=typeof value&&(value=""+value),value!==this.serialized)){var sanitized=this.sanitize(value);if(this.input.value!==sanitized){this.input.value=sanitized,this.sceditor_instance?this.sceditor_instance.val(sanitized):this.epiceditor?this.epiceditor.importFile(null,sanitized):this.ace_editor&&this.ace_editor.setValue(sanitized);var changed=from_template||this.getValue()!==value;this.refreshValue(),initial?this.is_dirty=!1:"change"===this.jsoneditor.options.show_errors&&(this.is_dirty=!0),this.adjust_height&&this.adjust_height(this.input),this.onChange(changed)}}},getNumColumns:function(){var num,min=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5);return num="textarea"===this.input_type?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(min,num))},build:function(){var self=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if("textarea"===this.format)this.input_type="textarea",this.input=this.theme.getTextareaInput();else if("range"===this.format){this.input_type="range"
;var min=this.schema.minimum||0,max=this.schema.maximum||Math.max(100,min+1),step=1;this.schema.multipleOf&&(min%this.schema.multipleOf&&(min=Math.ceil(min/this.schema.multipleOf)*this.schema.multipleOf),max%this.schema.multipleOf&&(max=Math.floor(max/this.schema.multipleOf)*this.schema.multipleOf),step=this.schema.multipleOf),this.input=this.theme.getRangeInput(min,max,step)}else["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0?(this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type));else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);void 0!==this.schema.maxLength&&this.input.setAttribute("maxlength",this.schema.maxLength),void 0!==this.schema.pattern?this.input.setAttribute("pattern",this.schema.pattern):void 0!==this.schema.minLength&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}"),this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width),(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(e){if(e.preventDefault(),e.stopPropagation(),self.schema.template)return void(this.value=self.value);var val=this.value,sanitized=self.sanitize(val);val!==sanitized&&(this.value=sanitized),self.is_dirty=!0,self.refreshValue(),self.onChange(!0)}),this.options.input_height&&(this.input.style.height=this.options.input_height),this.options.expand_height&&(this.adjust_height=function(el){if(el){var i,ch=el.offsetHeight;if(el.offsetHeight<el.scrollHeight)for(i=0;el.offsetHeight<el.scrollHeight+3&&!(i>100);)i++,ch++,el.style.height=ch+"px";else{for(i=0;el.offsetHeight>=el.scrollHeight+3&&!(i>100);)i++,ch--,el.style.height=ch+"px";el.style.height=ch+1+"px"}}},this.input.addEventListener("keyup",function(e){self.adjust_height(this)}),this.input.addEventListener("change",function(e){self.adjust_height(this)}),this.adjust_height()),this.format&&this.input.setAttribute("data-schemaformat",this.format),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),window.requestAnimationFrame(function(){self.input.parentNode&&self.afterInputReady(),self.adjust_height&&self.adjust_height(self.input)}),this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},afterInputReady:function(){var options,self=this;if(this.source_code)if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor)options=$extend({},{plugins:"html"===self.input_type?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},JSONEditor.plugins.sceditor,self.options.sceditor_options||{}),window.jQuery(self.input).sceditor(options),self.sceditor_instance=window.jQuery(self.input).sceditor("instance"),self.sceditor_instance.blur(function(){var val=window.jQuery("<div>"+self.sceditor_instance.val()+"</div>");window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",val).remove(),self.input.value=val.html(),self.value=self.input.value,self.is_dirty=!0,self.onChange(!0)});else if("markdown"===this.input_type&&window.EpicEditor)this.epiceditor_container=document.createElement("div"),this.input.parentNode.insertBefore(this.epiceditor_container,this.input),this.input.style.display="none",options=$extend({},JSONEditor.plugins.epiceditor,{container:this.epiceditor_container,clientSideStorage:!1}),this.epiceditor=new window.EpicEditor(options).load(),this.epiceditor.importFile(null,this.getValue()),this.epiceditor.on("update",function(){var val=self.epiceditor.exportFile();self.input.value=val,self.value=val,self.is_dirty=!0,self.onChange(!0)});else if(window.ace){var mode=this.input_type;"cpp"!==mode&&"c++"!==mode&&"c"!==mode||(mode="c_cpp"),this.ace_container=document.createElement("div"),this.ace_container.style.width="100%",this.ace_container.style.position="relative",this.ace_container.style.height="400px",this.input.parentNode.insertBefore(this.ace_container,this.input),this.input.style.display="none",this.ace_editor=window.ace.edit(this.ace_container),this.ace_editor.setValue(this.getValue()),JSONEditor.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+JSONEditor.plugins.ace.theme),console.log("Mode ACE Editor: '"+mode+"'"),["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0&&this.ace_editor.session.setMode("ace/mode/"+mode),this.ace_editor.on("change",function(){var val=self.ace_editor.getValue();self.input.value=val,self.refreshValue(),self.is_dirty=!0,self.onChange(!0)})}self.theme.afterInputReady(self.input)},refreshValue:function(){this.value=this.input.value,"string"!=typeof this.value&&(this.value=""),this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.epiceditor?this.epiceditor.unload():this.ace_editor&&this.ace_editor.destroy(),this.template=null,this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this._super()},sanitize:function(value){return value},onWatchedFieldChange:function(){var vars;this.template&&(vars=this.getWatchedFieldValues(),this.setValue(this.template(vars),!1,!0)),this._super()},showValidationErrors:function(errors){var self=this;if("always"===this.jsoneditor.options.show_errors);else if(!this.is_dirty&&this.previous_error_setting===this.jsoneditor.options.show_errors)return;this.previous_error_setting=this.jsoneditor.options.show_errors;var messages=[];$each(errors,function(i,error){error.path===self.path&&messages.push(error.message)}),messages.length?this.theme.addInputError(this.input,messages.join(". ")+"."):this.theme.removeInputError(this.input)}}),JSONEditor.defaults.editors.number=JSONEditor.defaults.editors.string.extend({sanitize:function(value){return(value+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return 1*this.value}}),JSONEditor.defaults.editors.integer=JSONEditor.defaults.editors.number.extend({sanitize:function(value){return value+="",value.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}}),JSONEditor.defaults.editors.object=JSONEditor.AbstractEditor.extend({getDefault:function(){return $extend({},this.schema.default||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var i in this.editors)this.editors.hasOwnProperty(i)&&this.editors[i].register()},unregister:function(){if(this._super(),this.editors)for(var i in this.editors)this.editors.hasOwnProperty(i)&&this.editors[i].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors)for(var i in this.editors)this.editors.hasOwnProperty(i)&&this.editors[i].enable()},disable:function(){if(this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var i in this.editors)this.editors.hasOwnProperty(i)&&this.editors[i].disable()},layoutEditors:function(){var i,j,self=this;if(this.row_container){this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(a,b){var ordera=self.editors[a].schema.propertyOrder,orderb=self.editors[b].schema.propertyOrder;return"number"!=typeof ordera&&(ordera=1e3),"number"!=typeof orderb&&(orderb=1e3),ordera-orderb});var container;if("grid"===this.format){var rows=[];for($each(this.property_order,function(j,key){var editor=self.editors[key];if(!editor.property_removed){for(var found=!1,width=editor.options.hidden?0:editor.options.grid_columns||editor.getNumColumns(),height=editor.options.hidden?0:editor.container.offsetHeight,i=0;i<rows.length;i++)rows[i].width+width<=12&&(!height||.5*rows[i].minh<height&&2*rows[i].maxh>height)&&(found=i);!1===found&&(rows.push({width:0,minh:999999,maxh:0,editors:[]}),found=rows.length-1),rows[found].editors.push({key:key,width:width,height:height}),rows[found].width+=width,rows[found].minh=Math.min(rows[found].minh,height),rows[found].maxh=Math.max(rows[found].maxh,height)}}),i=0;i<rows.length;i++)if(rows[i].width<12){var biggest=!1,new_width=0;for(j=0;j<rows[i].editors.length;j++)!1===biggest?biggest=j:rows[i].editors[j].width>rows[i].editors[biggest].width&&(biggest=j),rows[i].editors[j].width*=12/rows[i].width,rows[i].editors[j].width=Math.floor(rows[i].editors[j].width),new_width+=rows[i].editors[j].width;new_width<12&&(rows[i].editors[biggest].width+=12-new_width),rows[i].width=12}if(this.layout===JSON.stringify(rows))return!1;for(this.layout=JSON.stringify(rows),container=document.createElement("div"),i=0;i<rows.length;i++){var row=this.theme.getGridRow();for(container.appendChild(row),j=0;j<rows[i].editors.length;j++){var key=rows[i].editors[j].key,editor=this.editors[key];editor.options.hidden?editor.container.style.display="none":this.theme.setGridColumnSize(editor.container,rows[i].editors[j].width),row.appendChild(editor.container)}}}else container=document.createElement("div"),$each(this.property_order,function(i,key){var editor=self.editors[key];if(!editor.property_removed){var row=self.theme.getGridRow();container.appendChild(row),editor.options.hidden?editor.container.style.display="none":self.theme.setGridColumnSize(editor.container,12),row.appendChild(editor.container)}});this.row_container.innerHTML="",this.row_container.appendChild(container)}},getPropertySchema:function(key){var schema=this.schema.properties[key]||{};schema=$extend({},schema);var matched=!!this.schema.properties[key];if(this.schema.patternProperties)for(var i in this.schema.patternProperties)if(this.schema.patternProperties.hasOwnProperty(i)){var regex=new RegExp(i);regex.test(key)&&(schema.allOf=schema.allOf||[],schema.allOf.push(this.schema.patternProperties[i]),matched=!0)}return!matched&&this.schema.additionalProperties&&"object"==typeof this.schema.additionalProperties&&(schema=$extend({},this.schema.additionalProperties)),schema},preBuild:function(){this._super(),this.editors={},this.cached_editors={};var self=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)$each(this.schema.properties,function(key,schema){var editor=self.jsoneditor.getEditorClass(schema);self.editors[key]=self.jsoneditor.createEditor(editor,{jsoneditor:self.jsoneditor,schema:schema,path:self.path+"."+key,parent:self,compact:!0,required:!0}),self.editors[key].preBuild();var width=self.editors[key].options.hidden?0:self.editors[key].options.grid_columns||self.editors[key].getNumColumns();self.minwidth+=width,self.maxwidth+=width}),this.no_link_holder=!0;else{if(this.options.table)throw"Not supported yet";this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?(this.schema.defaultProperties=[],$each(this.schema.properties,function(k,s){self.isRequired({key:k,schema:s})&&self.schema.defaultProperties.push(k)})):self.schema.defaultProperties=Object.keys(self.schema.properties)),self.maxwidth+=1,$each(this.schema.defaultProperties,function(i,key){self.addObjectProperty(key,!0),self.editors[key]&&(self.minwidth=Math.max(self.minwidth,self.editors[key].options.grid_columns||self.editors[key].getNumColumns()),self.maxwidth+=self.editors[key].options.grid_columns||self.editors[key].getNumColumns())})}this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(a,b){var ordera=self.editors[a].schema.propertyOrder,orderb=self.editors[b].schema.propertyOrder;return"number"!=typeof ordera&&(ordera=1e3),"number"!=typeof orderb&&(orderb=1e3),ordera-orderb})},build:function(){var self=this;if(this.options.table_row)this.editor_holder=this.container,$each(this.editors,function(key,editor){var holder=self.theme.getTableCell();self.editor_holder.appendChild(holder),editor.setContainer(holder),editor.build(),editor.postBuild(),self.editors[key].options.hidden&&(holder.style.display="none"),self.editors[key].options.input_width&&(holder.style.width=self.editors[key].options.input_width)});else{if(this.options.table)throw"Not supported yet";this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(e){if(e.preventDefault(),e.stopPropagation(),self.addproperty_input.value){if(self.editors[self.addproperty_input.value])return void window.alert("there is already a property with that name");self.addObjectProperty(self.addproperty_input.value),self.editors[self.addproperty_input.value]&&self.editors[self.addproperty_input.value].disable(),self.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add);var spacer=document.createElement("div");spacer.style.clear="both",this.addproperty_holder.appendChild(spacer),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),$each(this.editors,function(key,editor){var holder=self.theme.getGridColumn();self.row_container.appendChild(holder),editor.setContainer(holder),editor.build(),editor.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.collapsed?(self.editor_holder.style.display="",self.collapsed=!1,self.setButtonText(self.toggle_button,"","collapse",self.translate("button_collapse"))):(self.editor_holder.style.display="none",self.collapsed=!0,self.setButtonText(self.toggle_button,"","expand",self.translate("button_expand")))}),this.options.collapsed&&$trigger(this.toggle_button,"click"),this.schema.options&&void 0!==this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&void 0!==this.schema.options.disable_edit_json?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_button.style.display="none"),this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties()}this.options.table_row?(this.editor_holder=this.container,$each(this.property_order,function(i,key){self.editor_holder.appendChild(self.editors[key].container)})):(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder)try{var json=JSON.parse(this.editjson_textarea.value);this.setValue(json),this.hideEditJSON()}catch(e){throw window.alert("invalid JSON"),e}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(property,control,container){var propertyOrder;this.schema.properties[property]&&(propertyOrder=this.schema.properties[property].propertyOrder),"number"!=typeof propertyOrder&&(propertyOrder=1e3),control.propertyOrder=propertyOrder;for(var i=0;i<container.childNodes.length;i++){var child=container.childNodes[i];if(control.propertyOrder<child.propertyOrder){this.addproperty_list.insertBefore(control,child),control=null;break}}control&&this.addproperty_list.appendChild(control)},addPropertyCheckbox:function(key){var checkbox,label,labelText,control,self=this;return checkbox=self.theme.getCheckbox(),checkbox.style.width="auto",labelText=this.schema.properties[key]&&this.schema.properties[key].title?this.schema.properties[key].title:key,label=self.theme.getCheckboxLabel(labelText),control=self.theme.getFormControl(label,checkbox),control.style.paddingBottom=control.style.marginBottom=control.style.paddingTop=control.style.marginTop=0,control.style.height="auto",this.insertPropertyControlUsingPropertyOrder(key,control,this.addproperty_list),checkbox.checked=key in this.editors,checkbox.addEventListener("change",function(){checkbox.checked?self.addObjectProperty(key):self.removeObjectProperty(key),self.onChange(!0)}),self.addproperty_checkboxes[key]=checkbox,checkbox},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(property){this.editors[property]&&(this.editors[property].unregister(),delete this.editors[property],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(name,prebuild_only){var self=this;if(!this.editors[name]){if(this.cached_editors[name]){if(this.editors[name]=this.cached_editors[name],prebuild_only)return;this.editors[name].register()}else{if(!(this.canHaveAdditionalProperties()||this.schema.properties&&this.schema.properties[name]))return;var schema=self.getPropertySchema(name),editor=self.jsoneditor.getEditorClass(schema);if(self.editors[name]=self.jsoneditor.createEditor(editor,{jsoneditor:self.jsoneditor,schema:schema,path:self.path+"."+name,parent:self}),self.editors[name].preBuild(),!prebuild_only){var holder=self.theme.getChildEditorHolder();self.editor_holder.appendChild(holder),self.editors[name].setContainer(holder),self.editors[name].build(),self.editors[name].postBuild()}self.cached_editors[name]=self.editors[name]}prebuild_only||(self.refreshValue(),self.layoutEditors())}},onChildEditorChange:function(editor){this.refreshValue(),this._super(editor)},canHaveAdditionalProperties:function(){return"boolean"==typeof this.schema.additionalProperties?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){$each(this.cached_editors,function(i,el){el.destroy()}),this.editor_holder&&(this.editor_holder.innerHTML=""),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder),this.editors=null,this.cached_editors=null,this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.editor_holder=null,this._super()},getValue:function(){var result=this._super();if(this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(var i in result)result.hasOwnProperty(i)&&(result[i]||delete result[i]);return result},refreshValue:function(){this.value={};for(var i in this.editors)this.editors.hasOwnProperty(i)&&(this.value[i]=this.editors[i].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||!1!==this.options.disable_properties&&this.jsoneditor.options.disable_properties)return void(this.addproperty_controls.style.display="none");var i,can_add=!1,num_props=0,show_modal=!1;for(i in this.editors)this.editors.hasOwnProperty(i)&&num_props++;can_add=this.canHaveAdditionalProperties()&&!(void 0!==this.schema.maxProperties&&num_props>=this.schema.maxProperties),this.addproperty_checkboxes&&(this.addproperty_list.innerHTML=""),this.addproperty_checkboxes={};for(i in this.cached_editors)this.cached_editors.hasOwnProperty(i)&&(this.addPropertyCheckbox(i),this.isRequired(this.cached_editors[i])&&i in this.editors&&(this.addproperty_checkboxes[i].disabled=!0),void 0!==this.schema.minProperties&&num_props<=this.schema.minProperties?(this.addproperty_checkboxes[i].disabled=this.addproperty_checkboxes[i].checked,this.addproperty_checkboxes[i].checked||(show_modal=!0)):i in this.editors?(show_modal=!0,!0):can_add||this.schema.properties.hasOwnProperty(i)?(this.addproperty_checkboxes[i].disabled=!1,show_modal=!0):this.addproperty_checkboxes[i].disabled=!0);this.canHaveAdditionalProperties()&&(show_modal=!0);for(i in this.schema.properties)this.schema.properties.hasOwnProperty(i)&&(this.cached_editors[i]||(show_modal=!0,this.addPropertyCheckbox(i)));show_modal?this.canHaveAdditionalProperties()?this.addproperty_add.disabled=!can_add:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(editor){return"boolean"==typeof editor.schema.required?editor.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(editor.key)>-1:!!this.jsoneditor.options.required_by_default},setValue:function(value,initial){var self=this;value=value||{},("object"!=typeof value||Array.isArray(value))&&(value={}),$each(this.cached_editors,function(i,editor){void 0!==value[i]?(self.addObjectProperty(i),editor.setValue(value[i],initial)):initial||self.isRequired(editor)?editor.setValue(editor.getDefault(),initial):self.removeObjectProperty(i)}),$each(value,function(i,val){self.cached_editors[i]||(self.addObjectProperty(i),self.editors[i]&&self.editors[i].setValue(val,initial))}),this.refreshValue(),this.layoutEditors(),this.onChange()},showValidationErrors:function(errors){var self=this,my_errors=[],other_errors=[];if($each(errors,function(i,error){error.path===self.path?my_errors.push(error):other_errors.push(error)}),this.error_holder)if(my_errors.length){this.error_holder.innerHTML="",this.error_holder.style.display="",$each(my_errors,function(i,error){self.error_holder.appendChild(self.theme.getErrorMessage(error.message))})}else this.error_holder.style.display="none";this.options.table_row&&(my_errors.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container)),$each(this.editors,function(i,editor){editor.showValidationErrors(other_errors)})}}),JSONEditor.defaults.editors.array=JSONEditor.AbstractEditor.extend({getDefault:function(){return this.schema.default||[]},register:function(){if(this._super(),this.rows)for(var i=0;i<this.rows.length;i++)this.rows[i].register()},unregister:function(){if(this._super(),this.rows)for(var i=0;i<this.rows.length;i++)this.rows[i].unregister()},getNumColumns:function(){var info=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,info.width+2),4):info.width},enable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.rows)for(var i=0;i<this.rows.length;i++)this.rows[i].enable(),this.rows[i].moveup_button&&(this.rows[i].moveup_button.disabled=!1),this.rows[i].movedown_button&&(this.rows[i].movedown_button.disabled=!1),this.rows[i].delete_button&&(this.rows[i].delete_button.disabled=!1);this._super()},disable:function(){if(this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.rows)for(var i=0;i<this.rows.length;i++)this.rows[i].disable(),this.rows[i].moveup_button&&(this.rows[i].moveup_button.disabled=!0),this.rows[i].movedown_button&&(this.rows[i].movedown_button.disabled=!0),this.rows[i].delete_button&&(this.rows[i].delete_button.disabled=!0);this._super()},preBuild:function(){this._super(),this.rows=[],this.row_cache=[],this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete,this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows,this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row,this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder,this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add},build:function(){this.options.compact?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),"tabs"===this.schema.format?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls))),this.addControls()},onChildEditorChange:function(editor){this.refreshValue(),this.refreshTabs(!0),this._super(editor)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var tmp=this.jsoneditor.expandRefs(this.schema.items);this.item_title=tmp.title||"item"}else this.item_title="item";return this.item_title},getItemSchema:function(i){return Array.isArray(this.schema.items)?i>=this.schema.items.length?!0===this.schema.additionalItems?{}:this.schema.additionalItems?$extend({},this.schema.additionalItems):void 0:$extend({},this.schema.items[i]):this.schema.items?$extend({},this.schema.items):{}},getItemInfo:function(i){var schema=this.getItemSchema(i);this.item_info=this.item_info||{};var stringified=JSON.stringify(schema);return void 0!==this.item_info[stringified]?this.item_info[stringified]:(schema=this.jsoneditor.expandRefs(schema),this.item_info[stringified]={title:schema.title||"item",default:schema.default,width:12,child_editors:schema.properties||schema.items},this.item_info[stringified])},getElementEditor:function(i){var item_info=this.getItemInfo(i),schema=this.getItemSchema(i);schema=this.jsoneditor.expandRefs(schema),schema.title=item_info.title+" "+(i+1);var holder,editor=this.jsoneditor.getEditorClass(schema)
;holder=this.tabs_holder?this.theme.getTabContent():item_info.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(holder);var ret=this.jsoneditor.createEditor(editor,{jsoneditor:this.jsoneditor,schema:schema,container:holder,path:this.path+"."+i,parent:this,required:!0});return ret.preBuild(),ret.build(),ret.postBuild(),ret.title_controls||(ret.array_controls=this.theme.getButtonHolder(),holder.appendChild(ret.array_controls)),ret},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null,this._super()},empty:function(hard){if(this.rows){var self=this;$each(this.rows,function(i,row){hard&&(row.tab&&row.tab.parentNode&&row.tab.parentNode.removeChild(row.tab),self.destroyRow(row,!0),self.row_cache[i]=null),self.rows[i]=null}),self.rows=[],hard&&(self.row_cache=[])}},destroyRow:function(row,hard){var holder=row.container;hard?(row.destroy(),holder.parentNode&&holder.parentNode.removeChild(holder),row.tab&&row.tab.parentNode&&row.tab.parentNode.removeChild(row.tab)):(row.tab&&(row.tab.style.display="none"),holder.style.display="none",row.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&!1===this.schema.additionalItems?Math.min(this.schema.items.length,this.schema.maxItems||1/0):this.schema.maxItems||1/0},refreshTabs:function(refresh_headers){var self=this;$each(this.rows,function(i,row){row.tab&&(refresh_headers?row.tab_text.textContent=row.getHeaderText():row.tab===self.active_tab?(self.theme.markTabActive(row.tab),row.container.style.display=""):(self.theme.markTabInactive(row.tab),row.container.style.display="none"))})},setValue:function(value,initial){if(value=value||[],Array.isArray(value)||(value=[value]),JSON.stringify(value)!==this.serialized){if(this.schema.minItems)for(;value.length<this.schema.minItems;)value.push(this.getItemInfo(value.length).default);this.getMax()&&value.length>this.getMax()&&(value=value.slice(0,this.getMax()));var self=this;$each(value,function(i,val){self.rows[i]?self.rows[i].setValue(val,initial):self.row_cache[i]?(self.rows[i]=self.row_cache[i],self.rows[i].setValue(val,initial),self.rows[i].container.style.display="",self.rows[i].tab&&(self.rows[i].tab.style.display=""),self.rows[i].register()):self.addRow(val,initial)});for(var j=value.length;j<self.rows.length;j++)self.destroyRow(self.rows[j]),self.rows[j]=null;self.rows=self.rows.slice(0,value.length);var new_active_tab=null;$each(self.rows,function(i,row){if(row.tab===self.active_tab)return new_active_tab=row.tab,!1}),!new_active_tab&&self.rows.length&&(new_active_tab=self.rows[0].tab),self.active_tab=new_active_tab,self.refreshValue(initial),self.refreshTabs(!0),self.refreshTabs(),self.onChange()}},refreshValue:function(force){var self=this,oldi=this.value?this.value.length:0;if(this.value=[],$each(this.rows,function(i,editor){self.value[i]=editor.getValue()}),oldi!==this.value.length||force){var minItems=this.schema.minItems&&this.schema.minItems>=this.rows.length;$each(this.rows,function(i,editor){editor.movedown_button&&(i===self.rows.length-1?editor.movedown_button.style.display="none":editor.movedown_button.style.display=""),editor.delete_button&&(editor.delete_button.style.display=minItems?"none":""),self.value[i]=editor.getValue()});var controls_needed=!1;this.value.length?1===this.value.length?(this.remove_all_rows_button.style.display="none",minItems||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",controls_needed=!0)):(minItems||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",controls_needed=!0),minItems||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",controls_needed=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",controls_needed=!0),!this.collapsed&&controls_needed?this.controls.style.display="inline-block":this.controls.style.display="none"}},addRow:function(value,initial){var self=this,i=this.rows.length;self.rows[i]=this.getElementEditor(i),self.row_cache[i]=self.rows[i],self.tabs_holder&&(self.rows[i].tab_text=document.createElement("span"),self.rows[i].tab_text.textContent=self.rows[i].getHeaderText(),self.rows[i].tab=self.theme.getTab(self.rows[i].tab_text),self.rows[i].tab.addEventListener("click",function(e){self.active_tab=self.rows[i].tab,self.refreshTabs(),e.preventDefault(),e.stopPropagation()}),self.theme.addTab(self.tabs_holder,self.rows[i].tab));var controls_holder=self.rows[i].title_controls||self.rows[i].array_controls;self.hide_delete_buttons||(self.rows[i].delete_button=this.getButton(self.getItemTitle(),"delete",this.translate("button_delete_row_title",[self.getItemTitle()])),self.rows[i].delete_button.className+=" delete",self.rows[i].delete_button.setAttribute("data-i",i),self.rows[i].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),value=self.getValue(),newval=[],new_active_tab=null;$each(value,function(j,row){if(j===i)return void(self.rows[j].tab===self.active_tab&&(self.rows[j+1]?new_active_tab=self.rows[j].tab:j&&(new_active_tab=self.rows[j-1].tab)));newval.push(row)}),self.setValue(newval),new_active_tab&&(self.active_tab=new_active_tab,self.refreshTabs()),self.onChange(!0)}),controls_holder&&controls_holder.appendChild(self.rows[i].delete_button)),i&&!self.hide_move_buttons&&(self.rows[i].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),self.rows[i].moveup_button.className+=" moveup",self.rows[i].moveup_button.setAttribute("data-i",i),self.rows[i].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i");if(!(i<=0)){var rows=self.getValue(),tmp=rows[i-1];rows[i-1]=rows[i],rows[i]=tmp,self.setValue(rows),self.active_tab=self.rows[i-1].tab,self.refreshTabs(),self.onChange(!0)}}),controls_holder&&controls_holder.appendChild(self.rows[i].moveup_button)),self.hide_move_buttons||(self.rows[i].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),self.rows[i].movedown_button.className+=" movedown",self.rows[i].movedown_button.setAttribute("data-i",i),self.rows[i].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),rows=self.getValue();if(!(i>=rows.length-1)){var tmp=rows[i+1];rows[i+1]=rows[i],rows[i]=tmp,self.setValue(rows),self.active_tab=self.rows[i+1].tab,self.refreshTabs(),self.onChange(!0)}}),controls_holder&&controls_holder.appendChild(self.rows[i].movedown_button)),value&&self.rows[i].setValue(value,initial),self.refreshTabs()},addControls:function(){var self=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button);var row_holder_display=self.row_holder.style.display,controls_display=self.controls.style.display;this.toggle_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.collapsed?(self.collapsed=!1,self.panel&&(self.panel.style.display=""),self.row_holder.style.display=row_holder_display,self.tabs_holder&&(self.tabs_holder.style.display=""),self.controls.style.display=controls_display,self.setButtonText(this,"","collapse",self.translate("button_collapse"))):(self.collapsed=!0,self.row_holder.style.display="none",self.tabs_holder&&(self.tabs_holder.style.display="none"),self.controls.style.display="none",self.panel&&(self.panel.style.display="none"),self.setButtonText(this,"","expand",self.translate("button_expand")))}),this.options.collapsed&&$trigger(this.toggle_button,"click"),this.schema.options&&void 0!==this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=self.rows.length;self.row_cache[i]?(self.rows[i]=self.row_cache[i],self.rows[i].setValue(self.rows[i].getDefault(),!0),self.rows[i].container.style.display="",self.rows[i].tab&&(self.rows[i].tab.style.display=""),self.rows[i].register()):self.addRow(),self.active_tab=self.rows[i].tab,self.refreshTabs(),self.refreshValue(),self.onChange(!0)}),self.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var rows=self.getValue(),new_active_tab=null;self.rows.length>1&&self.rows[self.rows.length-1].tab===self.active_tab&&(new_active_tab=self.rows[self.rows.length-2].tab),rows.pop(),self.setValue(rows),new_active_tab&&(self.active_tab=new_active_tab,self.refreshTabs()),self.onChange(!0)}),self.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.setValue([]),self.onChange(!0)}),self.controls.appendChild(this.remove_all_rows_button),self.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(errors){var self=this,my_errors=[],other_errors=[];if($each(errors,function(i,error){error.path===self.path?my_errors.push(error):other_errors.push(error)}),this.error_holder)if(my_errors.length){this.error_holder.innerHTML="",this.error_holder.style.display="",$each(my_errors,function(i,error){self.error_holder.appendChild(self.theme.getErrorMessage(error.message))})}else this.error_holder.style.display="none";$each(this.rows,function(i,row){row.showValidationErrors(other_errors)})}}),JSONEditor.defaults.editors.table=JSONEditor.defaults.editors.array.extend({register:function(){if(this._super(),this.rows)for(var i=0;i<this.rows.length;i++)this.rows[i].register()},unregister:function(){if(this._super(),this.rows)for(var i=0;i<this.rows.length;i++)this.rows[i].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var item_schema=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=item_schema.title||"row",this.item_default=item_schema.default||null,this.item_has_child_editors=item_schema.properties||item_schema.items,this.width=12,this._super()},build:function(){var self=this;this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder);var tmp=this.getElementEditor(0,!0);if(this.item_default=tmp.getDefault(),this.width=tmp.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(var ce=tmp.getChildEditors(),order=tmp.property_order||Object.keys(ce),i=0;i<order.length;i++){var th=self.theme.getTableHeaderCell(ce[order[i]].getTitle());ce[order[i]].options.hidden&&(th.style.display="none"),self.header_row.appendChild(th)}else self.header_row.appendChild(self.theme.getTableHeaderCell(this.item_title));tmp.destroy(),this.row_holder.innerHTML="",this.controls_header_cell=self.theme.getTableHeaderCell(" "),self.header_row.appendChild(this.controls_header_cell),this.addControls()},onChildEditorChange:function(editor){this.refreshValue(),this._super()},getItemDefault:function(){return $extend({},{default:this.item_default}).default},getItemTitle:function(){return this.item_title},getElementEditor:function(i,ignore){var schema_copy=$extend({},this.schema.items),editor=this.jsoneditor.getEditorClass(schema_copy,this.jsoneditor),row=this.row_holder.appendChild(this.theme.getTableRow()),holder=row;this.item_has_child_editors||(holder=this.theme.getTableCell(),row.appendChild(holder));var ret=this.jsoneditor.createEditor(editor,{jsoneditor:this.jsoneditor,schema:schema_copy,container:holder,path:this.path+"."+i,parent:this,compact:!0,table_row:!0});return ret.preBuild(),ignore||(ret.build(),ret.postBuild(),ret.controls_cell=row.appendChild(this.theme.getTableCell()),ret.row=row,ret.table_controls=this.theme.getButtonHolder(),ret.controls_cell.appendChild(ret.table_controls),ret.table_controls.style.margin=0,ret.table_controls.style.padding=0),ret},destroy:function(){this.innerHTML="",this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder),this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table),this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel),this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null,this._super()},setValue:function(value,initial){if(value=value||[],this.schema.minItems)for(;value.length<this.schema.minItems;)value.push(this.getItemDefault());if(this.schema.maxItems&&value.length>this.schema.maxItems&&(value=value.slice(0,this.schema.maxItems)),JSON.stringify(value)!==this.serialized){var numrows_changed=!1,self=this;$each(value,function(i,val){self.rows[i]?self.rows[i].setValue(val):(self.addRow(val),numrows_changed=!0)});for(var j=value.length;j<self.rows.length;j++){var holder=self.rows[j].container;self.item_has_child_editors||self.rows[j].row.parentNode.removeChild(self.rows[j].row),self.rows[j].destroy(),holder.parentNode&&holder.parentNode.removeChild(holder),self.rows[j]=null,numrows_changed=!0}self.rows=self.rows.slice(0,value.length),self.refreshValue(),(numrows_changed||initial)&&self.refreshRowButtons(),self.onChange()}},refreshRowButtons:function(){var self=this,minItems=this.schema.minItems&&this.schema.minItems>=this.rows.length,need_row_buttons=!1;$each(this.rows,function(i,editor){editor.movedown_button&&(i===self.rows.length-1?editor.movedown_button.style.display="none":(need_row_buttons=!0,editor.movedown_button.style.display="")),editor.delete_button&&(minItems?editor.delete_button.style.display="none":(need_row_buttons=!0,editor.delete_button.style.display="")),editor.moveup_button&&(need_row_buttons=!0)}),$each(this.rows,function(i,editor){editor.controls_cell.style.display=need_row_buttons?"":"none"}),this.controls_header_cell.style.display=need_row_buttons?"":"none";var controls_needed=!1;this.value.length?1===this.value.length?(this.table.style.display="",this.remove_all_rows_button.style.display="none",minItems||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",controls_needed=!0)):(this.table.style.display="",minItems||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",controls_needed=!0),minItems||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",controls_needed=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none"),this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",controls_needed=!0),this.controls.style.display=controls_needed?"":"none"},refreshValue:function(){var self=this;this.value=[],$each(this.rows,function(i,editor){self.value[i]=editor.getValue()}),this.serialized=JSON.stringify(this.value)},addRow:function(value){var self=this,i=this.rows.length;self.rows[i]=this.getElementEditor(i);var controls_holder=self.rows[i].table_controls;this.hide_delete_buttons||(self.rows[i].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),self.rows[i].delete_button.className+=" delete",self.rows[i].delete_button.setAttribute("data-i",i),self.rows[i].delete_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),value=self.getValue(),newval=[];$each(value,function(j,row){j!==i&&newval.push(row)}),self.setValue(newval),self.onChange(!0)}),controls_holder.appendChild(self.rows[i].delete_button)),i&&!this.hide_move_buttons&&(self.rows[i].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),self.rows[i].moveup_button.className+=" moveup",self.rows[i].moveup_button.setAttribute("data-i",i),self.rows[i].moveup_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i");if(!(i<=0)){var rows=self.getValue(),tmp=rows[i-1];rows[i-1]=rows[i],rows[i]=tmp,self.setValue(rows),self.onChange(!0)}}),controls_holder.appendChild(self.rows[i].moveup_button)),this.hide_move_buttons||(self.rows[i].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),self.rows[i].movedown_button.className+=" movedown",self.rows[i].movedown_button.setAttribute("data-i",i),self.rows[i].movedown_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var i=1*this.getAttribute("data-i"),rows=self.getValue();if(!(i>=rows.length-1)){var tmp=rows[i+1];rows[i+1]=rows[i],rows[i]=tmp,self.setValue(rows),self.onChange(!0)}}),controls_holder.appendChild(self.rows[i].movedown_button)),value&&self.rows[i].setValue(value)},addControls:function(){var self=this;this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.collapsed?(self.collapsed=!1,self.panel.style.display="",self.setButtonText(this,"","collapse",self.translate("button_collapse"))):(self.collapsed=!0,self.panel.style.display="none",self.setButtonText(this,"","expand",self.translate("button_expand")))}),this.options.collapsed&&$trigger(this.toggle_button,"click"),this.schema.options&&void 0!==this.schema.options.disable_collapse?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none")),this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()])),this.add_row_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.addRow(),self.refreshValue(),self.refreshRowButtons(),self.onChange(!0)}),self.controls.appendChild(this.add_row_button),this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()])),this.delete_last_row_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var rows=self.getValue();rows.pop(),self.setValue(rows),self.onChange(!0)}),self.controls.appendChild(this.delete_last_row_button),this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title")),this.remove_all_rows_button.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),self.setValue([]),self.onChange(!0)}),self.controls.appendChild(this.remove_all_rows_button)}}),JSONEditor.defaults.editors.multiple=JSONEditor.AbstractEditor.extend({register:function(){if(this.editors){for(var i=0;i<this.editors.length;i++)this.editors[i]&&this.editors[i].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var i=0;i<this.editors.length;i++)this.editors[i]&&this.editors[i].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(this.editors)for(var i=0;i<this.editors.length;i++)this.editors[i]&&this.editors[i].enable();this.switcher.disabled=!1,this._super()},disable:function(){if(this.editors)for(var i=0;i<this.editors.length;i++)this.editors[i]&&this.editors[i].disable();this.switcher.disabled=!0,this._super()},switchEditor:function(i){var self=this;this.editors[i]||this.buildChildEditor(i);var current_value=self.getValue();self.type=i,self.register(),$each(self.editors,function(type,editor){editor&&(self.type===type?(self.keep_values&&editor.setValue(current_value,!0),editor.container.style.display=""):editor.container.style.display="none")}),self.refreshValue(),self.refreshHeaderText()},buildChildEditor:function(i){var self=this,type=this.types[i],holder=self.theme.getChildEditorHolder();self.editor_holder.appendChild(holder);var schema;"string"==typeof type?(schema=$extend({},self.schema),schema.type=type):(schema=$extend({},self.schema,type),schema=self.jsoneditor.expandRefs(schema),type.required&&Array.isArray(type.required)&&self.schema.required&&Array.isArray(self.schema.required)&&(schema.required=self.schema.required.concat(type.required)));var editor=self.jsoneditor.getEditorClass(schema);self.editors[i]=self.jsoneditor.createEditor(editor,{jsoneditor:self.jsoneditor,schema:schema,container:holder,path:self.path,parent:self,required:!0}),self.editors[i].preBuild(),self.editors[i].build(),self.editors[i].postBuild(),self.editors[i].header&&(self.editors[i].header.style.display="none"),self.editors[i].option=self.switcher_options[i],holder.addEventListener("change_header_text",function(){self.refreshHeaderText()}),i!==self.type&&(holder.style.display="none")},preBuild:function(){if(this.types=[],this.type=0,this.editors=[],this.validators=[],this.keep_values=!0,void 0!==this.jsoneditor.options.keep_oneof_values&&(this.keep_values=this.jsoneditor.options.keep_oneof_values),void 0!==this.options.keep_oneof_values&&(this.keep_values=this.options.keep_oneof_values),this.schema.oneOf)this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf;else if(this.schema.anyOf)this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf;else{if(this.schema.type&&"any"!==this.schema.type)Array.isArray(this.schema.type)?this.types=this.schema.type:this.types=[this.schema.type];else if(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow){var disallow=this.schema.disallow;"object"==typeof disallow&&Array.isArray(disallow)||(disallow=[disallow]);var allowed_types=[];$each(this.types,function(i,type){-1===disallow.indexOf(type)&&allowed_types.push(type)}),this.types=allowed_types}delete this.schema.type}this.display_text=this.getDisplayText(this.types)},build:function(){var self=this,container=this.container;this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.header),this.switcher=this.theme.getSwitcher(this.display_text),container.appendChild(this.switcher),this.switcher.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),self.switchEditor(self.display_text.indexOf(this.value)),self.onChange(!0)}),this.editor_holder=document.createElement("div"),container.appendChild(this.editor_holder);var validator_options={};self.jsoneditor.options.custom_validators&&(validator_options.custom_validators=self.jsoneditor.options.custom_validators),this.switcher_options=this.theme.getSwitcherOptions(this.switcher),$each(this.types,function(i,type){self.editors[i]=!1;var schema;"string"==typeof type?(schema=$extend({},self.schema),schema.type=type):(schema=$extend({},self.schema,type),type.required&&Array.isArray(type.required)&&self.schema.required&&Array.isArray(self.schema.required)&&(schema.required=self.schema.required.concat(type.required))),self.validators[i]=new JSONEditor.Validator(self.jsoneditor,schema,validator_options)}),this.switchEditor(0)},onChildEditorChange:function(editor){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText()),this._super()},refreshHeaderText:function(){var display_text=this.getDisplayText(this.types);$each(this.switcher_options,function(i,option){option.textContent=display_text[i]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(val,initial){var self=this;$each(this.validators,function(i,validator){if(!validator.validate(val).length)return self.type=i,self.switcher.value=self.display_text[i],!1}),this.switchEditor(this.type),this.editors[this.type].setValue(val,initial),this.refreshValue(),self.onChange()},destroy:function(){$each(this.editors,function(type,editor){editor&&editor.destroy()}),this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()},showValidationErrors:function(errors){var self=this;if(this.oneOf||this.anyOf){var check_part=this.oneOf?"oneOf":"anyOf";$each(this.editors,function(i,editor){if(editor){var check=self.path+"."+check_part+"["+i+"]",new_errors=[];$each(errors,function(j,error){if(error.path.substr(0,check.length)===check){var new_error=$extend({},error);new_error.path=self.path+new_error.path.substr(check.length),new_errors.push(new_error)}}),editor.showValidationErrors(new_errors)}})}else $each(this.editors,function(type,editor){editor&&editor.showValidationErrors(errors)})}}),JSONEditor.defaults.editors.enum=JSONEditor.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){this.container;this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this.enum=this.schema.enum,this.selected=0,this.select_options=[],this.html_values=[];for(var self=this,i=0;i<this.enum.length;i++)this.select_options[i]=this.options.enum_titles[i]||"Value "+(i+1),this.html_values[i]=this.getHTML(this.enum[i]);this.switcher=this.theme.getSwitcher(this.select_options),this.container.appendChild(this.switcher),this.display_area=this.theme.getIndentedPanel(),this.container.appendChild(this.display_area),this.options.hide_display&&(this.display_area.style.display="none"),this.switcher.addEventListener("change",function(){self.selected=self.select_options.indexOf(this.value),self.value=self.enum[self.selected],self.refreshValue(),self.onChange(!0)}),this.value=this.enum[0],this.refreshValue(),1===this.enum.length&&(this.switcher.style.display="none")},refreshValue:function(){var self=this;self.selected=-1;var stringified=JSON.stringify(this.value);if($each(this.enum,function(i,el){if(stringified===JSON.stringify(el))return self.selected=i,!1}),self.selected<0)return void self.setValue(self.enum[0]);this.switcher.value=this.select_options[this.selected],this.display_area.innerHTML=this.html_values[this.selected]},enable:function(){this.always_disabled||(this.switcher.disabled=!1),this._super()},disable:function(){this.switcher.disabled=!0,this._super()},getHTML:function(el){var self=this;if(null===el)return"<em>null</em>";if("object"==typeof el){var ret="";return $each(el,function(i,child){var html=self.getHTML(child);Array.isArray(el)||(html="<div><em>"+i+"</em>: "+html+"</div>"),ret+="<li>"+html+"</li>"}),ret=Array.isArray(el)?"<ol>"+ret+"</ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+ret+"</ul>"}return"boolean"==typeof el?el?"true":"false":"string"==typeof el?el.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):el},setValue:function(val){this.value!==val&&(this.value=val,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher),this._super()}}),JSONEditor.defaults.editors.select=JSONEditor.AbstractEditor.extend({setValue:function(value,initial){value=this.typecast(value||"");var sanitized=value;this.enum_values.indexOf(sanitized)<0&&(sanitized=this.enum_values[0]),this.value!==sanitized&&(this.input.value=this.enum_options[this.enum_values.indexOf(sanitized)],this.select2&&this.select2.select2("val",this.input.value),this.value=sanitized,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var longest_text=this.getTitle().length,i=0;i<this.enum_options.length;i++)longest_text=Math.max(longest_text,this.enum_options[i].length+4);return Math.min(12,Math.max(longest_text/7,2))},typecast:function(value){return"boolean"===this.schema.type?!!value:"number"===this.schema.type?1*value:"integer"===this.schema.type?Math.floor(1*value):""+value},getValue:function(){return this.value},preBuild:function(){var self=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var i;if(this.schema.enum){var display=this.schema.options&&this.schema.options.enum_titles||[];$each(this.schema.enum,function(i,option){self.enum_options[i]=""+option,self.enum_display[i]=""+(display[i]||option),self.enum_values[i]=self.typecast(option)}),this.isRequired()||(self.enum_display.unshift(" "),self.enum_options.unshift("undefined"),self.enum_values.unshift(void 0))}else if("boolean"===this.schema.type)self.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],self.enum_options=["1",""],self.enum_values=[!0,!1],this.isRequired()||(self.enum_display.unshift(" "),
self.enum_options.unshift("undefined"),self.enum_values.unshift(void 0));else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(i=0;i<this.schema.enumSource.length;i++)"string"==typeof this.schema.enumSource[i]?this.enumSource[i]={source:this.schema.enumSource[i]}:Array.isArray(this.schema.enumSource[i])?this.enumSource[i]=this.schema.enumSource[i]:this.enumSource[i]=$extend({},this.schema.enumSource[i]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];for(i=0;i<this.enumSource.length;i++)this.enumSource[i].value&&(this.enumSource[i].value=this.jsoneditor.compileTemplate(this.enumSource[i].value,this.template_engine)),this.enumSource[i].title&&(this.enumSource[i].title=this.jsoneditor.compileTemplate(this.enumSource[i].title,this.template_engine)),this.enumSource[i].filter&&(this.enumSource[i].filter=this.jsoneditor.compileTemplate(this.enumSource[i].filter,this.template_engine))}},build:function(){var self=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),self.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var new_val,val=this.input.value;(new_val=-1===this.enum_options.indexOf(val)?this.enum_values[0]:this.enum_values[this.enum_options.indexOf(val)])!==this.value&&(this.value=new_val,this.onChange(!0))},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){var options=$extend({},JSONEditor.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(options=$extend(options,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(options);var self=this;this.select2.on("select2-blur",function(){self.input.value=self.select2.select2("val"),self.onInputChange()}),this.select2.on("change",function(){self.input.value=self.select2.select2("val"),self.onInputChange()})}else this.select2=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelect2()},onWatchedFieldChange:function(){var vars,j;if(this.enumSource){vars=this.getWatchedFieldValues();for(var select_options=[],select_titles=[],i=0;i<this.enumSource.length;i++)if(Array.isArray(this.enumSource[i]))select_options=select_options.concat(this.enumSource[i]),select_titles=select_titles.concat(this.enumSource[i]);else{var items=[];if(items=Array.isArray(this.enumSource[i].source)?this.enumSource[i].source:vars[this.enumSource[i].source]){if(this.enumSource[i].slice&&(items=Array.prototype.slice.apply(items,this.enumSource[i].slice)),this.enumSource[i].filter){var new_items=[];for(j=0;j<items.length;j++)this.enumSource[i].filter({i:j,item:items[j],watched:vars})&&new_items.push(items[j]);items=new_items}var item_titles=[],item_values=[];for(j=0;j<items.length;j++){var item=items[j];this.enumSource[i].value?item_values[j]=this.enumSource[i].value({i:j,item:item}):item_values[j]=items[j],this.enumSource[i].title?item_titles[j]=this.enumSource[i].title({i:j,item:item}):item_titles[j]=item_values[j]}select_options=select_options.concat(item_values),select_titles=select_titles.concat(item_titles)}}var prev_value=this.value;this.theme.setSelectOptions(this.input,select_options,select_titles),this.enum_options=select_options,this.enum_display=select_titles,this.enum_values=select_options,this.select2&&this.select2.select2("destroy"),-1!==select_options.indexOf(prev_value)?(this.input.value=prev_value,this.value=prev_value):(this.input.value=select_options[0],this.value=select_options[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&this.select2.select2("enable",!0)),this._super()},disable:function(){this.input.disabled=!0,this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),JSONEditor.defaults.editors.selectize=JSONEditor.AbstractEditor.extend({setValue:function(value,initial){value=this.typecast(value||"");var sanitized=value;this.enum_values.indexOf(sanitized)<0&&(sanitized=this.enum_values[0]),this.value!==sanitized&&(this.input.value=this.enum_options[this.enum_values.indexOf(sanitized)],this.selectize&&this.selectize[0].selectize.addItem(sanitized),this.value=sanitized,this.onChange())},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){if(!this.enum_options)return 3;for(var longest_text=this.getTitle().length,i=0;i<this.enum_options.length;i++)longest_text=Math.max(longest_text,this.enum_options[i].length+4);return Math.min(12,Math.max(longest_text/7,2))},typecast:function(value){return"boolean"===this.schema.type?!!value:"number"===this.schema.type?1*value:"integer"===this.schema.type?Math.floor(1*value):""+value},getValue:function(){return this.value},preBuild:function(){var self=this;this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[];var i;if(this.schema.enum){var display=this.schema.options&&this.schema.options.enum_titles||[];$each(this.schema.enum,function(i,option){self.enum_options[i]=""+option,self.enum_display[i]=""+(display[i]||option),self.enum_values[i]=self.typecast(option)})}else if("boolean"===this.schema.type)self.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],self.enum_options=["1","0"],self.enum_values=[!0,!1];else{if(!this.schema.enumSource)throw"'select' editor requires the enum property to be set.";if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(i=0;i<this.schema.enumSource.length;i++)"string"==typeof this.schema.enumSource[i]?this.enumSource[i]={source:this.schema.enumSource[i]}:Array.isArray(this.schema.enumSource[i])?this.enumSource[i]=this.schema.enumSource[i]:this.enumSource[i]=$extend({},this.schema.enumSource[i]);else this.schema.enumValue?this.enumSource=[{source:this.schema.enumSource,value:this.schema.enumValue}]:this.enumSource=[{source:this.schema.enumSource}];for(i=0;i<this.enumSource.length;i++)this.enumSource[i].value&&(this.enumSource[i].value=this.jsoneditor.compileTemplate(this.enumSource[i].value,this.template_engine)),this.enumSource[i].title&&(this.enumSource[i].title=this.jsoneditor.compileTemplate(this.enumSource[i].title,this.template_engine)),this.enumSource[i].filter&&(this.enumSource[i].filter=this.jsoneditor.compileTemplate(this.enumSource[i].filter,this.template_engine))}},build:function(){var self=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getSelectInput(this.enum_options),this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),self.onInputChange()}),this.control=this.theme.getFormControl(this.label,this.input,this.description),this.container.appendChild(this.control),this.value=this.enum_values[0]},onInputChange:function(){var val=this.input.value;-1===this.enum_options.indexOf(val)&&this.enum_options[0],this.value=this.enum_values[this.enum_options.indexOf(val)],this.onChange(!0)},setupSelectize:function(){var self=this;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&(this.enum_options.length>=2||this.enum_options.length&&this.enumSource)){var options=$extend({},JSONEditor.plugins.selectize);this.schema.options&&this.schema.options.selectize_options&&(options=$extend(options,this.schema.options.selectize_options)),this.selectize=window.jQuery(this.input).selectize($extend(options,{create:!0,onChange:function(){self.onInputChange()}}))}else this.selectize=null},postBuild:function(){this._super(),this.theme.afterInputReady(this.input),this.setupSelectize()},onWatchedFieldChange:function(){var vars,j;if(this.enumSource){vars=this.getWatchedFieldValues();for(var select_options=[],select_titles=[],i=0;i<this.enumSource.length;i++)if(Array.isArray(this.enumSource[i]))select_options=select_options.concat(this.enumSource[i]),select_titles=select_titles.concat(this.enumSource[i]);else if(vars[this.enumSource[i].source]){var items=vars[this.enumSource[i].source];if(this.enumSource[i].slice&&(items=Array.prototype.slice.apply(items,this.enumSource[i].slice)),this.enumSource[i].filter){var new_items=[];for(j=0;j<items.length;j++)this.enumSource[i].filter({i:j,item:items[j]})&&new_items.push(items[j]);items=new_items}var item_titles=[],item_values=[];for(j=0;j<items.length;j++){var item=items[j];this.enumSource[i].value?item_values[j]=this.enumSource[i].value({i:j,item:item}):item_values[j]=items[j],this.enumSource[i].title?item_titles[j]=this.enumSource[i].title({i:j,item:item}):item_titles[j]=item_values[j]}select_options=select_options.concat(item_values),select_titles=select_titles.concat(item_titles)}var prev_value=this.value;this.theme.setSelectOptions(this.input,select_options,select_titles),this.enum_options=select_options,this.enum_display=select_titles,this.enum_values=select_options,-1!==select_options.indexOf(prev_value)?(this.input.value=prev_value,this.value=prev_value):(this.input.value=select_options[0],this.value=select_options[0]||"",this.parent?this.parent.onChildEditorChange(this):this.jsoneditor.onChange(),this.jsoneditor.notifyWatchers(this.path)),this.selectize?this.updateSelectizeOptions(select_options):this.setupSelectize(),this._super()}},updateSelectizeOptions:function(select_options){var selectized=this.selectize[0].selectize,self=this;selectized.off(),selectized.clearOptions();for(var n in select_options)selectized.addOption({value:select_options[n],text:select_options[n]});selectized.addItem(this.value),selectized.on("change",function(){self.onInputChange()})},enable:function(){this.always_disabled||(this.input.disabled=!1,this.selectize&&this.selectize[0].selectize.unlock()),this._super()},disable:function(){this.input.disabled=!0,this.selectize&&this.selectize[0].selectize.lock(),this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.selectize&&(this.selectize[0].selectize.destroy(),this.selectize=null),this._super()}}),JSONEditor.defaults.editors.multiselect=JSONEditor.AbstractEditor.extend({preBuild:function(){this._super();var i;this.select_options={},this.select_values={};var items_schema=this.jsoneditor.expandRefs(this.schema.items||{}),e=items_schema.enum||[],t=items_schema.options?items_schema.options.enum_titles||[]:[];for(this.option_keys=[],this.option_titles=[],i=0;i<e.length;i++)this.sanitize(e[i])===e[i]&&(this.option_keys.push(e[i]+""),this.option_titles.push((t[i]||e[i])+""),this.select_values[e[i]+""]=e[i])},build:function(){var i,self=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&this.option_keys.length<8||"checkbox"===this.schema.format){for(this.input_type="checkboxes",this.inputs={},this.controls={},i=0;i<this.option_keys.length;i++){this.inputs[this.option_keys[i]]=this.theme.getCheckbox(),this.select_options[this.option_keys[i]]=this.inputs[this.option_keys[i]];var label=this.theme.getCheckboxLabel(this.option_titles[i]);this.controls[this.option_keys[i]]=this.theme.getFormControl(label,this.inputs[this.option_keys[i]])}this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),i=0;i<this.option_keys.length;i++)this.select_options[this.option_keys[i]]=this.input.children[i];(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control),this.control.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation();var new_value=[];for(i=0;i<self.option_keys.length;i++)(self.select_options[self.option_keys[i]].selected||self.select_options[self.option_keys[i]].checked)&&new_value.push(self.select_values[self.option_keys[i]]);self.updateValue(new_value),self.onChange(!0)})},setValue:function(value,initial){var i;for(value=value||[],"object"!=typeof value?value=[value]:Array.isArray(value)||(value=[]),i=0;i<value.length;i++)"string"!=typeof value[i]&&(value[i]+="");for(i in this.select_options)this.select_options.hasOwnProperty(i)&&(this.select_options[i]["select"===this.input_type?"selected":"checked"]=-1!==value.indexOf(i));this.updateValue(value),this.onChange()},setupSelect2:function(){if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){var options=window.jQuery.extend({},JSONEditor.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(options=$extend(options,this.schema.options.select2_options)),this.select2=window.jQuery(this.input).select2(options);var self=this;this.select2.on("select2-blur",function(){var val=self.select2.select2("val");self.value=val,self.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value,this.onChange(!0)},postBuild:function(){this._super(),this.setupSelect2()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){var longest_text=this.getTitle().length;for(var i in this.select_values)this.select_values.hasOwnProperty(i)&&(longest_text=Math.max(longest_text,(this.select_values[i]+"").length+4));return Math.min(12,Math.max(longest_text/7,2))},updateValue:function(value){for(var changed=!1,new_value=[],i=0;i<value.length;i++)if(this.select_options[value[i]+""]){var sanitized=this.sanitize(this.select_values[value[i]]);new_value.push(sanitized),sanitized!==value[i]&&(changed=!0)}else changed=!0;return this.value=new_value,this.select2&&this.select2.select2("val",this.value),changed},sanitize:function(value){return"number"===this.schema.items.type?1*value:"integer"===this.schema.items.type?Math.floor(1*value):""+value},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var i in this.inputs)this.inputs.hasOwnProperty(i)&&(this.inputs[i].disabled=!1);this.select2&&this.select2.select2("enable",!0)}this._super()},disable:function(){if(this.input)this.input.disabled=!0;else if(this.inputs)for(var i in this.inputs)this.inputs.hasOwnProperty(i)&&(this.inputs[i].disabled=!0);this.select2&&this.select2.select2("enable",!1),this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null),this._super()}}),JSONEditor.defaults.editors.base64=JSONEditor.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var self=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(e){if(e.preventDefault(),e.stopPropagation(),this.files&&this.files.length){var fr=new FileReader;fr.onload=function(evt){self.value=evt.target.result,self.refreshPreview(),self.onChange(!0),fr=null},fr.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)){var mime=this.value.match(/^data:([^;,]+)[;,]/);if(mime&&(mime=mime[1]),mime){if(this.preview.innerHTML="<strong>Type:</strong> "+mime+", <strong>Size:</strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes","image"===mime.substr(0,5)){this.preview.innerHTML+="<br>";var img=document.createElement("img");img.style.maxWidth="100%",img.style.maxHeight="100px",img.src=this.value,this.preview.appendChild(img)}}else this.preview.innerHTML="<em>Invalid data URI</em>"}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(val){this.value!==val&&(this.value=val,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),JSONEditor.defaults.editors.upload=JSONEditor.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var self=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file"),this.uploader.addEventListener("change",function(e){if(e.preventDefault(),e.stopPropagation(),this.files&&this.files.length){var fr=new FileReader;fr.onload=function(evt){self.preview_value=evt.target.result,self.refreshPreview(),self.onChange(!0),fr=null},fr.readAsDataURL(this.files[0])}})}var description=this.schema.description;description||(description=""),this.preview=this.theme.getFormInputDescription(description),this.container.appendChild(this.preview),this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview),this.container.appendChild(this.control)},refreshPreview:function(){if(this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)){var self=this,mime=this.preview_value.match(/^data:([^;,]+)[;,]/);mime&&(mime=mime[1]),mime||(mime="unknown");var file=this.uploader.files[0];if(this.preview.innerHTML="<strong>Type:</strong> "+mime+", <strong>Size:</strong> "+file.size+" bytes","image"===mime.substr(0,5)){this.preview.innerHTML+="<br>";var img=document.createElement("img");img.style.maxWidth="100%",img.style.maxHeight="100px",img.src=this.preview_value,this.preview.appendChild(img)}this.preview.innerHTML+="<br>";var uploadButton=this.getButton("Upload","upload","Upload");this.preview.appendChild(uploadButton),uploadButton.addEventListener("click",function(event){event.preventDefault(),uploadButton.setAttribute("disabled","disabled"),self.theme.removeInputError(self.uploader),self.theme.getProgressBar&&(self.progressBar=self.theme.getProgressBar(),self.preview.appendChild(self.progressBar)),self.jsoneditor.options.upload(self.path,file,{success:function(url){self.setValue(url),self.parent?self.parent.onChildEditorChange(self):self.jsoneditor.onChange(),self.progressBar&&self.preview.removeChild(self.progressBar),uploadButton.removeAttribute("disabled")},failure:function(error){self.theme.addInputError(self.uploader,error),self.progressBar&&self.preview.removeChild(self.progressBar),uploadButton.removeAttribute("disabled")},updateProgress:function(progress){self.progressBar&&(progress?self.theme.updateProgressBar(self.progressBar,progress):self.theme.updateProgressBarUnknown(self.progressBar))}})})}},enable:function(){this.uploader&&(this.uploader.disabled=!1),this._super()},disable:function(){this.uploader&&(this.uploader.disabled=!0),this._super()},setValue:function(val){this.value!==val&&(this.value=val,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader),this._super()}}),JSONEditor.defaults.editors.checkbox=JSONEditor.AbstractEditor.extend({setValue:function(value,initial){this.value=!!value,this.input.checked=this.value,this.onChange()},register:function(){this._super(),this.input&&this.input.setAttribute("name",this.formname)},unregister:function(){this._super(),this.input&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var self=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.compact&&(this.container.className+=" compact"),this.input=this.theme.getCheckbox(),this.control=this.theme.getFormControl(this.label,this.input,this.description),(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0),this.input.addEventListener("change",function(e){e.preventDefault(),e.stopPropagation(),self.value=this.checked,self.onChange(!0)}),this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1),this._super()},disable:function(){this.input.disabled=!0,this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()}}),JSONEditor.defaults.editors.arraySelectize=JSONEditor.AbstractEditor.extend({build:function(){this.title=this.theme.getFormInputLabel(this.getTitle()),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.error_holder=document.createElement("div"),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description)),this.input=document.createElement("select"),this.input.setAttribute("multiple","multiple");var group=this.theme.getFormControl(this.title,this.input,this.description);this.container.appendChild(group),this.container.appendChild(this.error_holder),window.jQuery(this.input).selectize({delimiter:!1,createOnBlur:!0,create:!0})},postBuild:function(){var self=this;this.input.selectize.on("change",function(event){self.refreshValue(),self.onChange(!0)})},destroy:function(){this.empty(!0),this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),this._super()},empty:function(hard){},setValue:function(value,initial){var self=this;value=value||[],Array.isArray(value)||(value=[value]),this.input.selectize.clearOptions(),this.input.selectize.clear(!0),value.forEach(function(item){self.input.selectize.addOption({text:item,value:item})}),this.input.selectize.setValue(value),this.refreshValue(initial)},refreshValue:function(force){this.value=this.input.selectize.getValue()},showValidationErrors:function(errors){var self=this,my_errors=[],other_errors=[];if($each(errors,function(i,error){error.path===self.path?my_errors.push(error):other_errors.push(error)}),this.error_holder)if(my_errors.length){this.error_holder.innerHTML="",this.error_holder.style.display="",$each(my_errors,function(i,error){self.error_holder.appendChild(self.theme.getErrorMessage(error.message))})}else this.error_holder.style.display="none"}});var matchKey=function(){var elem=document.documentElement;return elem.matches?"matches":elem.webkitMatchesSelector?"webkitMatchesSelector":elem.mozMatchesSelector?"mozMatchesSelector":elem.msMatchesSelector?"msMatchesSelector":elem.oMatchesSelector?"oMatchesSelector":void 0}();JSONEditor.AbstractTheme=Class.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var el=document.createElement("div");return el.style=el.style||{},el.style.cssFloat="right",el.style.marginLeft="10px",el},getModal:function(){var el=document.createElement("div");return el.style.backgroundColor="white",el.style.border="1px solid black",el.style.boxShadow="3px 3px black",el.style.position="absolute",el.style.zIndex="10",el.style.display="none",el},getGridContainer:function(){return document.createElement("div")},getGridRow:function(){var el=document.createElement("div");return el.className="row",el},getGridColumn:function(){return document.createElement("div")},setGridColumnSize:function(el,size){},getLink:function(text){var el=document.createElement("a");return el.setAttribute("href","#"),el.appendChild(document.createTextNode(text)),el},disableHeader:function(header){header.style.color="#ccc"},disableLabel:function(label){label.style.color="#ccc"},enableHeader:function(header){header.style.color=""},enableLabel:function(label){label.style.color=""},getFormInputLabel:function(text){var el=document.createElement("label");return el.appendChild(document.createTextNode(text)),el},getCheckboxLabel:function(text){var el=this.getFormInputLabel(text);return el.style.fontWeight="normal",el},getHeader:function(text){var el=document.createElement("h3");return"string"==typeof text?el.textContent=text:el.appendChild(text),el},getCheckbox:function(){var el=this.getFormInputField("checkbox");return el.style.display="inline-block",el.style.width="auto",el},getMultiCheckboxHolder:function(controls,label,description){var el=document.createElement("div");label&&(label.style.display="block",el.appendChild(label));for(var i in controls)controls.hasOwnProperty(i)&&(controls[i].style.display="inline-block",controls[i].style.marginRight="20px",el.appendChild(controls[i]));return description&&el.appendChild(description),el},getSelectInput:function(options){var select=document.createElement("select");return options&&this.setSelectOptions(select,options),select},getSwitcher:function(options){var switcher=this.getSelectInput(options);return switcher.style.backgroundColor="transparent",switcher.style.display="inline-block",switcher.style.fontStyle="italic",switcher.style.fontWeight="normal",switcher.style.height="auto",switcher.style.marginBottom=0,switcher.style.marginLeft="5px",switcher.style.padding="0 0 0 3px",switcher.style.width="auto",switcher},getSwitcherOptions:function(switcher){return switcher.getElementsByTagName("option")},setSwitcherOptions:function(switcher,options,titles){this.setSelectOptions(switcher,options,titles)},setSelectOptions:function(select,options,titles){titles=titles||[],select.innerHTML="";for(var i=0;i<options.length;i++){var option=document.createElement("option");option.setAttribute("value",options[i]),option.textContent=titles[i]||options[i],select.appendChild(option)}},getTextareaInput:function(){var el=document.createElement("textarea");return el.style=el.style||{},el.style.width="100%",el.style.height="300px",el.style.boxSizing="border-box",el},getRangeInput:function(min,max,step){var el=this.getFormInputField("range");return el.setAttribute("min",min),el.setAttribute("max",max),el.setAttribute("step",step),el},getFormInputField:function(type){var el=document.createElement("input");return el.setAttribute("type",type),el},afterInputReady:function(input){},getFormControl:function(label,input,description){var el=document.createElement("div");return el.className="form-control",label&&el.appendChild(label),"checkbox"===input.type?label.insertBefore(input,label.firstChild):el.appendChild(input),description&&el.appendChild(description),el},getIndentedPanel:function(){var el=document.createElement("div");return el.style=el.style||{},el.style.paddingLeft="10px",el.style.marginLeft="10px",el.style.borderLeft="1px solid #ccc",el},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(text){var el=document.createElement("p");return el.innerHTML=text,el},getCheckboxDescription:function(text){return this.getDescription(text)},getFormInputDescription:function(text){return this.getDescription(text)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(text,icon,title){var el=document.createElement("button");return el.type="button",this.setButtonText(el,text,icon,title),el},setButtonText:function(button,text,icon,title){button.innerHTML="",icon&&(button.appendChild(icon),button.innerHTML+=" "),button.appendChild(document.createTextNode(text)),title&&button.setAttribute("title",title)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(text){var el=document.createElement("th");return el.textContent=text,el},getTableCell:function(){return document.createElement("td")},getErrorMessage:function(text){var el=document.createElement("p");return el.style=el.style||{},el.style.color="red",el.appendChild(document.createTextNode(text)),el},addInputError:function(input,text){},removeInputError:function(input){},addTableRowError:function(row){},removeTableRowError:function(row){},getTabHolder:function(){var el=document.createElement("div");return el.innerHTML="<div style='float: left; width: 130px;' class='tabs'></div><div class='content' style='margin-left: 130px;'></div><div style='clear:both;'></div>",el},applyStyles:function(el,styles){el.style=el.style||{}
;for(var i in styles)styles.hasOwnProperty(i)&&(el.style[i]=styles[i])},closest:function(elem,selector){for(;elem&&elem!==document;){if(!elem[matchKey])return!1;if(elem[matchKey](selector))return elem;elem=elem.parentNode}return!1},getTab:function(span){var el=document.createElement("div");return el.appendChild(span),el.style=el.style||{},this.applyStyles(el,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),el},getTabContentHolder:function(tab_holder){return tab_holder.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(tab){this.applyStyles(tab,{opacity:1,background:"white"})},markTabInactive:function(tab){this.applyStyles(tab,{opacity:.5,background:""})},addTab:function(holder,tab){holder.children[0].appendChild(tab)},getBlockLink:function(){var link=document.createElement("a");return link.style.display="block",link},getBlockLinkHolder:function(){return document.createElement("div")},getLinksHolder:function(){return document.createElement("div")},createMediaLink:function(holder,link,media){holder.appendChild(link),media.style.width="100%",holder.appendChild(media)},createImageLink:function(holder,link,image){holder.appendChild(link),link.appendChild(image)}}),JSONEditor.defaults.themes.bootstrap2=JSONEditor.AbstractTheme.extend({getRangeInput:function(min,max,step){return this._super(min,max,step)},getGridContainer:function(){var el=document.createElement("div");return el.className="container-fluid",el},getGridRow:function(){var el=document.createElement("div");return el.className="row-fluid",el},getFormInputLabel:function(text){var el=this._super(text);return el.style.display="inline-block",el.style.fontWeight="bold",el},setGridColumnSize:function(el,size){el.className="span"+size},getSelectInput:function(options){var input=this._super(options);return input.style.width="auto",input.style.maxWidth="98%",input},getFormInputField:function(type){var el=this._super(type);return el.style.width="98%",el},afterInputReady:function(input){input.controlgroup||(input.controlgroup=this.closest(input,".control-group"),input.controls=this.closest(input,".controls"),this.closest(input,".compact")&&(input.controlgroup.className=input.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),input.controls.className=input.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),input.style.marginBottom=0))},getIndentedPanel:function(){var el=document.createElement("div");return el.className="well well-small",el.style.paddingBottom=0,el},getFormInputDescription:function(text){var el=document.createElement("p");return el.className="help-inline",el.textContent=text,el},getFormControl:function(label,input,description){var ret=document.createElement("div");ret.className="control-group";var controls=document.createElement("div");return controls.className="controls",label&&"checkbox"===input.getAttribute("type")?(ret.appendChild(controls),label.className+=" checkbox",label.appendChild(input),controls.appendChild(label),controls.style.height="30px"):(label&&(label.className+=" control-label",ret.appendChild(label)),controls.appendChild(input),ret.appendChild(controls)),description&&controls.appendChild(description),ret},getHeaderButtonHolder:function(){var el=this.getButtonHolder();return el.style.marginLeft="10px",el},getButtonHolder:function(){var el=document.createElement("div");return el.className="btn-group",el},getButton:function(text,icon,title){var el=this._super(text,icon,title);return el.className+=" btn btn-default",el},getTable:function(){var el=document.createElement("table");return el.className="table table-bordered",el.style.width="auto",el.style.maxWidth="none",el},addInputError:function(input,text){input.controlgroup&&input.controls&&(input.controlgroup.className+=" error",input.errmsg?input.errmsg.style.display="":(input.errmsg=document.createElement("p"),input.errmsg.className="help-block errormsg",input.controls.appendChild(input.errmsg)),input.errmsg.textContent=text)},removeInputError:function(input){input.errmsg&&(input.errmsg.style.display="none",input.controlgroup.className=input.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var el=document.createElement("div");return el.className="tabbable tabs-left",el.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'></ul><div class='tab-content span10' style='overflow:visible;'></div>",el},getTab:function(text){var el=document.createElement("li"),a=document.createElement("a");return a.setAttribute("href","#"),a.appendChild(text),el.appendChild(a),el},getTabContentHolder:function(tab_holder){return tab_holder.children[1]},getTabContent:function(){var el=document.createElement("div");return el.className="tab-pane active",el},markTabActive:function(tab){tab.className+=" active"},markTabInactive:function(tab){tab.className=tab.className.replace(/\s?active/g,"")},addTab:function(holder,tab){holder.children[0].appendChild(tab)},getProgressBar:function(){var container=document.createElement("div");container.className="progress";var bar=document.createElement("div");return bar.className="bar",bar.style.width="0%",container.appendChild(bar),container},updateProgressBar:function(progressBar,progress){progressBar&&(progressBar.firstChild.style.width=progress+"%")},updateProgressBarUnknown:function(progressBar){progressBar&&(progressBar.className="progress progress-striped active",progressBar.firstChild.style.width="100%")}}),JSONEditor.defaults.themes.bootstrap3=JSONEditor.AbstractTheme.extend({getSelectInput:function(options){var el=this._super(options);return el.className+="form-control",el},setGridColumnSize:function(el,size){el.className="col-md-"+size},afterInputReady:function(input){input.controlgroup||(input.controlgroup=this.closest(input,".form-group"),this.closest(input,".compact")&&(input.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var el=document.createElement("textarea");return el.className="form-control",el},getRangeInput:function(min,max,step){return this._super(min,max,step)},getFormInputField:function(type){var el=this._super(type);return"checkbox"!==type&&(el.className+="form-control"),el},getFormControl:function(label,input,description){var group=document.createElement("div");return label&&"checkbox"===input.type?(group.className+=" checkbox",label.appendChild(input),label.style.fontSize="14px",group.style.marginTop="0",group.appendChild(label),input.style.position="relative",input.style.cssFloat="left"):(group.className+=" form-group",label&&(label.className+=" control-label",group.appendChild(label)),group.appendChild(input)),description&&group.appendChild(description),group},getIndentedPanel:function(){var el=document.createElement("div");return el.className="well well-sm",el.style.paddingBottom=0,el},getFormInputDescription:function(text){var el=document.createElement("p");return el.className="help-block",el.innerHTML=text,el},getHeaderButtonHolder:function(){var el=this.getButtonHolder();return el.style.marginLeft="10px",el},getButtonHolder:function(){var el=document.createElement("div");return el.className="btn-group",el},getButton:function(text,icon,title){var el=this._super(text,icon,title);return el.className+="btn btn-default",el},getTable:function(){var el=document.createElement("table");return el.className="table table-bordered",el.style.width="auto",el.style.maxWidth="none",el},addInputError:function(input,text){input.controlgroup&&(input.controlgroup.className+=" has-error",input.errmsg?input.errmsg.style.display="":(input.errmsg=document.createElement("p"),input.errmsg.className="help-block errormsg",input.controlgroup.appendChild(input.errmsg)),input.errmsg.textContent=text)},removeInputError:function(input){input.errmsg&&(input.errmsg.style.display="none",input.controlgroup.className=input.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var el=document.createElement("div");return el.innerHTML="<div class='tabs list-group col-md-2'></div><div class='col-md-10'></div>",el.className="rows",el},getTab:function(text){var el=document.createElement("a");return el.className="list-group-item",el.setAttribute("href","#"),el.appendChild(text),el},markTabActive:function(tab){tab.className+=" active"},markTabInactive:function(tab){tab.className=tab.className.replace(/\s?active/g,"")},getProgressBar:function(){var container=document.createElement("div");container.className="progress";var bar=document.createElement("div");return bar.className="progress-bar",bar.setAttribute("role","progressbar"),bar.setAttribute("aria-valuenow",0),bar.setAttribute("aria-valuemin",0),bar.setAttribute("aria-valuenax",100),bar.innerHTML="0%",container.appendChild(bar),container},updateProgressBar:function(progressBar,progress){if(progressBar){var bar=progressBar.firstChild,percentage=progress+"%";bar.setAttribute("aria-valuenow",progress),bar.style.width=percentage,bar.innerHTML=percentage}},updateProgressBarUnknown:function(progressBar){if(progressBar){var bar=progressBar.firstChild;progressBar.className="progress progress-striped active",bar.removeAttribute("aria-valuenow"),bar.style.width="100%",bar.innerHTML=""}}}),JSONEditor.defaults.themes.foundation=JSONEditor.AbstractTheme.extend({getChildEditorHolder:function(){var el=document.createElement("div");return el.style.marginBottom="15px",el},getSelectInput:function(options){var el=this._super(options);return el.style.minWidth="none",el.style.padding="5px",el.style.marginTop="3px",el},getSwitcher:function(options){var el=this._super(options);return el.style.paddingRight="8px",el},afterInputReady:function(input){this.closest(input,".compact")&&(input.style.marginBottom=0),input.group=this.closest(input,".form-control")},getFormInputLabel:function(text){var el=this._super(text);return el.style.display="inline-block",el},getFormInputField:function(type){var el=this._super(type);return el.style.width="100%",el.style.marginBottom="checkbox"===type?"0":"12px",el},getFormInputDescription:function(text){var el=document.createElement("p");return el.textContent=text,el.style.marginTop="-10px",el.style.fontStyle="italic",el},getIndentedPanel:function(){var el=document.createElement("div");return el.className="panel",el.style.paddingBottom=0,el},getHeaderButtonHolder:function(){var el=this.getButtonHolder();return el.style.display="inline-block",el.style.marginLeft="10px",el.style.verticalAlign="middle",el},getButtonHolder:function(){var el=document.createElement("div");return el.className="button-group",el},getButton:function(text,icon,title){var el=this._super(text,icon,title);return el.className+=" small button",el},addInputError:function(input,text){input.group&&(input.group.className+=" error",input.errmsg?input.errmsg.style.display="":(input.insertAdjacentHTML("afterend",'<small class="error"></small>'),input.errmsg=input.parentNode.getElementsByClassName("error")[0]),input.errmsg.textContent=text)},removeInputError:function(input){input.errmsg&&(input.group.className=input.group.className.replace(/ error/g,""),input.errmsg.style.display="none")},getProgressBar:function(){var progressBar=document.createElement("div");progressBar.className="progress";var meter=document.createElement("span");return meter.className="meter",meter.style.width="0%",progressBar.appendChild(meter),progressBar},updateProgressBar:function(progressBar,progress){progressBar&&(progressBar.firstChild.style.width=progress+"%")},updateProgressBarUnknown:function(progressBar){progressBar&&(progressBar.firstChild.style.width="100%")}}),JSONEditor.defaults.themes.foundation3=JSONEditor.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var el=this._super();return el.style.fontSize=".6em",el},getFormInputLabel:function(text){var el=this._super(text);return el.style.fontWeight="bold",el},getTabHolder:function(){var el=document.createElement("div");return el.className="row",el.innerHTML="<dl class='tabs vertical two columns'></dl><div class='tabs-content ten columns'></div>",el},setGridColumnSize:function(el,size){var sizes=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"];el.className="columns "+sizes[size]},getTab:function(text){var el=document.createElement("dd"),a=document.createElement("a");return a.setAttribute("href","#"),a.appendChild(text),el.appendChild(a),el},getTabContentHolder:function(tab_holder){return tab_holder.children[1]},getTabContent:function(){var el=document.createElement("div");return el.className="content active",el.style.paddingLeft="5px",el},markTabActive:function(tab){tab.className+=" active"},markTabInactive:function(tab){tab.className=tab.className.replace(/\s*active/g,"")},addTab:function(holder,tab){holder.children[0].appendChild(tab)}}),JSONEditor.defaults.themes.foundation4=JSONEditor.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var el=this._super();return el.style.fontSize=".6em",el},setGridColumnSize:function(el,size){el.className="columns large-"+size},getFormInputDescription:function(text){var el=this._super(text);return el.style.fontSize=".8rem",el},getFormInputLabel:function(text){var el=this._super(text);return el.style.fontWeight="bold",el}}),JSONEditor.defaults.themes.foundation5=JSONEditor.defaults.themes.foundation.extend({getFormInputDescription:function(text){var el=this._super(text);return el.style.fontSize=".8rem",el},setGridColumnSize:function(el,size){el.className="columns medium-"+size},getButton:function(text,icon,title){var el=this._super(text,icon,title);return el.className=el.className.replace(/\s*small/g,"")+" tiny",el},getTabHolder:function(){var el=document.createElement("div");return el.innerHTML="<dl class='tabs vertical'></dl><div class='tabs-content vertical'></div>",el},getTab:function(text){var el=document.createElement("dd"),a=document.createElement("a");return a.setAttribute("href","#"),a.appendChild(text),el.appendChild(a),el},getTabContentHolder:function(tab_holder){return tab_holder.children[1]},getTabContent:function(){var el=document.createElement("div");return el.className="content active",el.style.paddingLeft="5px",el},markTabActive:function(tab){tab.className+=" active"},markTabInactive:function(tab){tab.className=tab.className.replace(/\s*active/g,"")},addTab:function(holder,tab){holder.children[0].appendChild(tab)}}),JSONEditor.defaults.themes.foundation6=JSONEditor.defaults.themes.foundation5.extend({getIndentedPanel:function(){var el=document.createElement("div");return el.className="callout secondary",el},getButtonHolder:function(){var el=document.createElement("div");return el.className="button-group tiny",el.style.marginBottom=0,el},getFormInputLabel:function(text){var el=this._super(text);return el.style.display="block",el},getFormControl:function(label,input,description){var el=document.createElement("div");return el.className="form-control",label&&el.appendChild(label),"checkbox"===input.type?label.insertBefore(input,label.firstChild):label?label.appendChild(input):el.appendChild(input),description&&label.appendChild(description),el},addInputError:function(input,text){if(input.group){if(input.group.className+=" error",input.errmsg)input.errmsg.style.display="",input.className="";else{var errorEl=document.createElement("span");errorEl.className="form-error is-visible",input.group.getElementsByTagName("label")[0].appendChild(errorEl),input.className=input.className+" is-invalid-input",input.errmsg=errorEl}input.errmsg.textContent=text}},removeInputError:function(input){input.errmsg&&(input.className=input.className.replace(/ is-invalid-input/g,""),input.errmsg.parentNode&&input.errmsg.parentNode.removeChild(input.errmsg))}}),JSONEditor.defaults.themes.html=JSONEditor.AbstractTheme.extend({getFormInputLabel:function(text){var el=this._super(text);return el.style.display="block",el.style.marginBottom="3px",el.style.fontWeight="bold",el},getFormInputDescription:function(text){var el=this._super(text);return el.style.fontSize=".8em",el.style.margin=0,el.style.display="inline-block",el.style.fontStyle="italic",el},getIndentedPanel:function(){var el=this._super();return el.style.border="1px solid #ddd",el.style.padding="5px",el.style.margin="5px",el.style.borderRadius="3px",el},getChildEditorHolder:function(){var el=this._super();return el.style.marginBottom="8px",el},getHeaderButtonHolder:function(){var el=this.getButtonHolder();return el.style.display="inline-block",el.style.marginLeft="10px",el.style.fontSize=".8em",el.style.verticalAlign="middle",el},getTable:function(){var el=this._super();return el.style.borderBottom="1px solid #ccc",el.style.marginBottom="5px",el},addInputError:function(input,text){if(input.style.borderColor="red",input.errmsg)input.errmsg.style.display="block";else{var group=this.closest(input,".form-control");input.errmsg=document.createElement("div"),input.errmsg.setAttribute("class","errmsg"),input.errmsg.style=input.errmsg.style||{},input.errmsg.style.color="red",group.appendChild(input.errmsg)}input.errmsg.innerHTML="",input.errmsg.appendChild(document.createTextNode(text))},removeInputError:function(input){input.style.borderColor="",input.errmsg&&(input.errmsg.style.display="none")},getProgressBar:function(){var progressBar=document.createElement("progress");return progressBar.setAttribute("max",100),progressBar.setAttribute("value",0),progressBar},updateProgressBar:function(progressBar,progress){progressBar&&progressBar.setAttribute("value",progress)},updateProgressBarUnknown:function(progressBar){progressBar&&progressBar.removeAttribute("value")}}),JSONEditor.defaults.themes.jqueryui=JSONEditor.AbstractTheme.extend({getTable:function(){var el=this._super();return el.setAttribute("cellpadding",5),el.setAttribute("cellspacing",0),el},getTableHeaderCell:function(text){var el=this._super(text);return el.className="ui-state-active",el.style.fontWeight="bold",el},getTableCell:function(){var el=this._super();return el.className="ui-widget-content",el},getHeaderButtonHolder:function(){var el=this.getButtonHolder();return el.style.marginLeft="10px",el.style.fontSize=".6em",el.style.display="inline-block",el},getFormInputDescription:function(text){var el=this.getDescription(text);return el.style.marginLeft="10px",el.style.display="inline-block",el},getFormControl:function(label,input,description){var el=this._super(label,input,description);return"checkbox"===input.type?(el.style.lineHeight="25px",el.style.padding="3px 0"):el.style.padding="4px 0 8px 0",el},getDescription:function(text){var el=document.createElement("span");return el.style.fontSize=".8em",el.style.fontStyle="italic",el.textContent=text,el},getButtonHolder:function(){var el=document.createElement("div");return el.className="ui-buttonset",el.style.fontSize=".7em",el},getFormInputLabel:function(text){var el=document.createElement("label");return el.style.fontWeight="bold",el.style.display="block",el.textContent=text,el},getButton:function(text,icon,title){var button=document.createElement("button");button.className="ui-button ui-widget ui-state-default ui-corner-all",icon&&!text?(button.className+=" ui-button-icon-only",icon.className+=" ui-button-icon-primary ui-icon-primary",button.appendChild(icon)):icon?(button.className+=" ui-button-text-icon-primary",icon.className+=" ui-button-icon-primary ui-icon-primary",button.appendChild(icon)):button.className+=" ui-button-text-only";var el=document.createElement("span");return el.className="ui-button-text",el.textContent=text||title||".",button.appendChild(el),button.setAttribute("title",title),button},setButtonText:function(button,text,icon,title){button.innerHTML="",button.className="ui-button ui-widget ui-state-default ui-corner-all",icon&&!text?(button.className+=" ui-button-icon-only",icon.className+=" ui-button-icon-primary ui-icon-primary",button.appendChild(icon)):icon?(button.className+=" ui-button-text-icon-primary",icon.className+=" ui-button-icon-primary ui-icon-primary",button.appendChild(icon)):button.className+=" ui-button-text-only";var el=document.createElement("span");el.className="ui-button-text",el.textContent=text||title||".",button.appendChild(el),button.setAttribute("title",title)},getIndentedPanel:function(){var el=document.createElement("div");return el.className="ui-widget-content ui-corner-all",el.style.padding="1em 1.4em",el.style.marginBottom="20px",el},afterInputReady:function(input){input.controls||(input.controls=this.closest(input,".form-control"))},addInputError:function(input,text){input.controls&&(input.errmsg?input.errmsg.style.display="":(input.errmsg=document.createElement("div"),input.errmsg.className="ui-state-error",input.controls.appendChild(input.errmsg)),input.errmsg.textContent=text)},removeInputError:function(input){input.errmsg&&(input.errmsg.style.display="none")},markTabActive:function(tab){tab.className=tab.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(tab){tab.className=tab.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}}),JSONEditor.defaults.themes.barebones=JSONEditor.AbstractTheme.extend({getFormInputLabel:function(text){return this._super(text)},getFormInputDescription:function(text){return this._super(text)},getIndentedPanel:function(){return this._super()},getChildEditorHolder:function(){return this._super()},getHeaderButtonHolder:function(){return this.getButtonHolder()},getTable:function(){return this._super()},addInputError:function(input,text){if(input.errmsg)input.errmsg.style.display="block";else{var group=this.closest(input,".form-control");input.errmsg=document.createElement("div"),input.errmsg.setAttribute("class","errmsg"),group.appendChild(input.errmsg)}input.errmsg.innerHTML="",input.errmsg.appendChild(document.createTextNode(text))},removeInputError:function(input){input.style.borderColor="",input.errmsg&&(input.errmsg.style.display="none")},getProgressBar:function(){var progressBar=document.createElement("progress");return progressBar.setAttribute("max",100),progressBar.setAttribute("value",0),progressBar},updateProgressBar:function(progressBar,progress){progressBar&&progressBar.setAttribute("value",progress)},updateProgressBarUnknown:function(progressBar){progressBar&&progressBar.removeAttribute("value")}}),JSONEditor.AbstractIconLib=Class.extend({mapping:{collapse:"",expand:"",delete:"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(key){return this.mapping[key]?this.icon_prefix+this.mapping[key]:null},getIcon:function(key){var iconclass=this.getIconClass(key);if(!iconclass)return null;var i=document.createElement("i");return i.className=iconclass,i}}),JSONEditor.defaults.iconlibs.bootstrap2=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up",delete:"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),JSONEditor.defaults.iconlibs.bootstrap3=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right",delete:"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"}),JSONEditor.defaults.iconlibs.fontawesome3=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right",delete:"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"}),JSONEditor.defaults.iconlibs.fontawesome4=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right",delete:"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fa fa-"}),JSONEditor.defaults.iconlibs.foundation2=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus",delete:"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"}),JSONEditor.defaults.iconlibs.foundation3=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus",delete:"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"}),JSONEditor.defaults.iconlibs.jqueryui=JSONEditor.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e",delete:"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"}),JSONEditor.defaults.templates.default=function(){return{compile:function(template){var matches=template.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),l=matches&&matches.length;if(!l)return function(){return template};for(var replacements=[],i=0;i<l;i++)!function(i){var func,p=matches[i].replace(/[{}]+/g,"").trim().split("."),n=p.length;if(n>1){var cur;func=function(vars){for(cur=vars,i=0;i<n&&(cur=cur[p[i]]);i++);return cur}}else p=p[0],func=function(vars){return vars[p]};replacements.push({s:matches[i],r:func})}(i);return function(vars){var r,ret=template+"";for(i=0;i<l;i++)r=replacements[i],ret=ret.replace(r.s,r.r(vars));return ret}}}},JSONEditor.defaults.templates.ejs=function(){return!!window.EJS&&{compile:function(template){var compiled=new window.EJS({text:template});return function(context){return compiled.render(context)}}}},JSONEditor.defaults.templates.handlebars=function(){return window.Handlebars},JSONEditor.defaults.templates.hogan=function(){return!!window.Hogan&&{compile:function(template){var compiled=window.Hogan.compile(template);return function(context){return compiled.render(context)}}}},JSONEditor.defaults.templates.markup=function(){return!(!window.Mark||!window.Mark.up)&&{compile:function(template){return function(context){return window.Mark.up(template,context)}}}},JSONEditor.defaults.templates.mustache=function(){return!!window.Mustache&&{compile:function(template){return function(view){return window.Mustache.render(template,view)}}}},JSONEditor.defaults.templates.swig=function(){return window.swig},JSONEditor.defaults.templates.underscore=function(){return!!window._&&{compile:function(template){return function(context){return window._.template(template,context)}}}},JSONEditor.defaults.theme="html",JSONEditor.defaults.template="default",JSONEditor.defaults.options={},JSONEditor.defaults.translate=function(key,variables){var lang=JSONEditor.defaults.languages[JSONEditor.defaults.language];if(!lang)throw"Unknown language "+JSONEditor.defaults.language;var string=lang[key]||JSONEditor.defaults.languages[JSONEditor.defaults.default_language][key];if(void 0===string)throw"Unknown translate string "+key;if(variables)for(var i=0;i<variables.length;i++)string=string.replace(new RegExp("\\{\\{"+i+"}}","g"),variables[i]);return string},JSONEditor.defaults.default_language="en",JSONEditor.defaults.language=JSONEditor.defaults.default_language,JSONEditor.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_collapse:"Collapse",button_expand:"Expand"},JSONEditor.plugins={ace:{theme:""},epiceditor:{},sceditor:{},select2:{},selectize:{}},$each(JSONEditor.defaults.editors,function(i,editor){JSONEditor.defaults.editors[i].options=editor.options||{}}),JSONEditor.defaults.resolvers.unshift(function(schema){if("string"!=typeof schema.type)return"multiple"}),JSONEditor.defaults.resolvers.unshift(function(schema){if(!schema.type&&schema.properties)return"object"}),JSONEditor.defaults.resolvers.unshift(function(schema){if("string"==typeof schema.type)return schema.type}),JSONEditor.defaults.resolvers.unshift(function(schema){if("boolean"===schema.type)return"checkbox"===schema.format||schema.options&&schema.options.checkbox?"checkbox":JSONEditor.plugins.selectize.enable?"selectize":"select"}),JSONEditor.defaults.resolvers.unshift(function(schema){if("any"===schema.type)return"multiple"}),JSONEditor.defaults.resolvers.unshift(function(schema){if("string"===schema.type&&schema.media&&"base64"===schema.media.binaryEncoding)return"base64"}),JSONEditor.defaults.resolvers.unshift(function(schema){if("string"===schema.type&&"url"===schema.format&&schema.options&&!0===schema.options.upload&&window.FileReader)return"upload"}),JSONEditor.defaults.resolvers.unshift(function(schema){if("array"==schema.type&&"table"==schema.format)return"table"}),JSONEditor.defaults.resolvers.unshift(function(schema){if(schema.enumSource)return JSONEditor.plugins.selectize.enable?"selectize":"select"}),JSONEditor.defaults.resolvers.unshift(function(schema){if(schema.enum){if("array"===schema.type||"object"===schema.type)return"enum";if("number"===schema.type||"integer"===schema.type||"string"===schema.type)return JSONEditor.plugins.selectize.enable?"selectize":"select"}}),JSONEditor.defaults.resolvers.unshift(function(schema){if("array"===schema.type&&schema.items&&!Array.isArray(schema.items)&&schema.uniqueItems&&["string","number","integer"].indexOf(schema.items.type)>=0){if(schema.items.enum)return"multiselect";if(JSONEditor.plugins.selectize.enable&&"string"===schema.items.type)return"arraySelectize"}}),JSONEditor.defaults.resolvers.unshift(function(schema){if(schema.oneOf||schema.anyOf)return"multiple"}),function(){if(window.jQuery||window.Zepto){var $=window.jQuery||window.Zepto;$.jsoneditor=JSONEditor.defaults,$.fn.jsoneditor=function(options){var self=this,editor=this.data("jsoneditor");if("value"===options){if(!editor)throw"Must initialize jsoneditor before getting/setting the value";if(!(arguments.length>1))return editor.getValue();editor.setValue(arguments[1])}else{if("validate"===options){if(!editor)throw"Must initialize jsoneditor before validating";return arguments.length>1?editor.validate(arguments[1]):editor.validate()}"destroy"===options?editor&&(editor.destroy(),this.data("jsoneditor",null)):(editor&&editor.destroy(),editor=new JSONEditor(this.get(0),options),this.data("jsoneditor",editor),
editor.on("change",function(){self.trigger("change")}),editor.on("ready",function(){self.trigger("ready")}))}return this}}}(),window.JSONEditor=JSONEditor}(),LinkParam.prototype.init=function(pDoc){this.aDoc=pDoc,this.aLink=pDoc.location,this.aVars=this.parseURL(pDoc.location.search)},LinkParam.prototype.parseURL=function(pLink){console.log("LinkParam.parseURL('..."+pLink+"')");var tokens,vLink=pLink||"",params={},re=/[?&]?([^=]+)=([^&]*)/g;if(""!=vLink)for(vLink=vLink.split("+").join(" ");tokens=re.exec(vLink);)params[decodeURIComponent(tokens[1])]=decodeURIComponent(this.decodeParam(tokens[2])),this.calcSize();else console.log("parseURL(pLink) - pLink contains no parameters");return params},LinkParam.prototype.getURL=function(pVarHash){var vParam="";return vParam=pVars?getParam4URL(pVars):getParam4URL(),this.getLink4URL()+vParam},LinkParam.prototype.setValue=function(pVar,pValue){this.aVars[pVar]=pValue,this.calcSize()},LinkParam.prototype.getValue=function(pVar){var vRet="";return this.aVars.hasOwnProperty(pVar)?vRet=this.aVars[pVar]:console.log("ERROR: variable '"+pVar+"' does not exist in LinkParam"),vRet},LinkParam.prototype.deleteValue=function(pVar){var vRet=!1;return this.aVars.hasOwnProperty(pVar)&&(delete this.aVars[pVar],vRet=!0,this.calcSize()),vRet},LinkParam.prototype.getLink4URL=function(){return this.aLink},LinkParam.prototype.getParam4URL=function(){var vHash=this.aVars||{},vOut="",vSep="?";for(var iID in vHash)vHash.hasOwnProperty(iID)&&(vOut+=vSep+this.encodeParam(iID)+"="+this.encodeParam(vHash[iID]),vSep="&");return vOut},LinkParam.prototype.decodeParam=function(pParam){return pParam=pParam.replace(/\+/g," "),pParam=decodeURIComponent(pParam)},LinkParam.prototype.encodeParam=function(pParam){var vParam=encodeURIComponent(pParam);return vParam=vParam.replace(/'/g,"%27").replace(/"/g,"%22")},LinkParam.prototype.getTableHTML=function(){var vOut="",vHash=this.aVars;vOut+="<table border=1>";for(var iID in vHash)vHash.hasOwnProperty(iID)&&(vOut+="<tr>",vOut+="<td>",vOut+="<b>"+iID+"</b>",vOut+="</td>",vOut+="<td>",vOut+=this.encodeHTML(vHash[iID],!0),vOut+="</td>",vOut+="</tr>");return vOut+="</table>"},LinkParam.prototype.getEditTableHTML=function(pPrefixID){var vOut=(pPredixID,""),vHash=this.aVars;vOut+="<table border=1>";var vRows=1,vContent="";for(var iID in vHash)vHash.hasOwnProperty(iID)&&(vContent=this.encodeHTML(vHash[iID],!1),vRows=vHash[iID].split("\n").length,vRows>10&&(vRows=10),vOut+="<tr>",vOut+="<td>",vOut+="<b>"+iID+"</b>",vOut+="</td>",vOut+="<td>",vOut+="<textarea id='"+vPrefix+iID+"'' cols='90' rows='"+vRows+"''>",vOut+=vContent,vOut+="</textarea>",vOut+="</td>",vOut+="</tr>");return vOut+="</table>"},LinkParam.prototype.calcSize=function(){var vRet=0;if(this.aVars)for(var iID in this.aVars)this.aVars.hasOwnProperty(iID)&&vRet++;else console.log("ERROR: variable '"+pVar+"' does not exist in LinkParam");return vRet},LinkParam.prototype.encodeHTML=function(pValue,pWrapCode){var vValue=pValue||"";return""!=vValue&&(vValue=vValue.replace(/</g,"&lt;"),vValue=vValue.replace(/>/g,"&gt;"),vValue=vValue.replace(/&/g,"&amp;")),pWrapCode&&1==pWrapCode&&(vValue="<pre><code>"+vValue+"</code></pre>"),vValue},LinkParam.prototype.exists=function(pVar){var vRet=!1;return pVar&&(vRet=this.aVars.hasOwnProperty(pVar)),vRet};